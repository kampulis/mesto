(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.allClasses=e,this.form=n}var r,o;return r=t,(o=[{key:"_validateInput",value:function(e,t,n){e.validity.valid?this._hideInputError(t):(this._showInputError(e,t),this._disableButton(n)),this.form.checkValidity()&&(n.disabled=!1)}},{key:"_showInputError",value:function(e,t){t.textContent=e.validationMessage}},{key:"_disableButton",value:function(e){e.disabled=!0}},{key:"_hideInputError",value:function(e){e.textContent=""}},{key:"_addValidationsToInputs",value:function(e,t){var n=this;t.forEach((function(t){var r=t.querySelector(n.allClasses.inputSelector),o=t.querySelector(n.allClasses.inputErrorSelector);r.addEventListener("input",(function(t){n._validateInput(t.target,o,e)}))}))}},{key:"enableValidations",value:function(){var e=Array.from(this.form.querySelectorAll(this.allClasses.inputContainerSelector)),t=this.form.querySelector(this.allClasses.submitButtonSelector);this._addValidationsToInputs(t,e),n(this.allClasses)}}])&&e(r.prototype,o),t}();function n(e){Array.from(document.querySelectorAll(e.disabledButtonSelector)).forEach((function(e){e.disabled=!0}))}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileTitle=document.querySelector(n),this.profileSubtitle=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.profileTitle.textContent,about:this.profileSubtitle.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this.profileTitle.textContent=t,this.profileSubtitle.textContent=n}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this.renderer=o,this.container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this;this.items.forEach((function(t){var n=e.renderer(t);e.addItem(n)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&i(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){27===e.keyCode&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this.popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleClosePopupEsc),this.popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-icon").addEventListener("click",this.close),this.popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&c(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(){return s(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){p(h(u.prototype),"open",this).call(this);var t=this.popup.querySelector("img");t.src=e.target.src,t.alt=e.target.alt;var n=e.target.closest(".mesto-card").querySelector(".mesto-card__subtitle-name");this.popup.querySelector(".popup__text").textContent=n.textContent}}])&&f(t.prototype,n),u}(a);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e)).submitFormHandler=t,n.form=n.popup.querySelector("form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this.form.querySelectorAll("input").forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;_(g(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){e.submitFormHandler(t,e._getInputValues()),e.close()}))}},{key:"close",value:function(){_(g(u.prototype),"close",this).call(this),this.form.reset()}}])&&b(t.prototype,n),u}(a);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n,r){var o=t.name,i=t.link;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=o,this.link=i,this.template=document.querySelector(n),this.handleCardClick=r}var t,n;return t=e,(n=[{key:"_addLike",value:function(e){e.target.classList.toggle("mesto-card__subtitle-icon_active")}},{key:"_deleteCard",value:function(e){e.target.closest(".mesto-card").remove()}},{key:"_showPhoto",value:function(e){this.handleCardClick(e)}},{key:"_getTemplate",value:function(){return this.template.content.cloneNode(!0)}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".mesto-card__subtitle-icon").addEventListener("click",this._addLike),e.querySelector(".mesto-card__trash").addEventListener("click",this._deleteCard),e.querySelector(".mesto-card__photo").addEventListener("click",(function(e){return t._showPhoto(e)}))}},{key:"createMestoCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".mesto-card__photo");return t.src=this.link,t.alt=this.name,e.querySelector(".mesto-card__subtitle-name").textContent=this.name,this._setEventListeners(e),e}}])&&E(t.prototype,n),e}();function j(e,t){return new O({name:e,link:t},"#mesto-card",(function(e){return H.open(e)})).createMestoCard()}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e)).submitFormHandler=t,n.form=n.popup.querySelector("form"),n}return t=u,(n=[{key:"setEventListeners",value:function(){this.form.addEventListener("submit",this.setEventListeners)}}])&&P(t.prototype,n),u}(a);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){}},{key:"test",value:function(){fetch(this.baseUrl,this.headers).then((function(e){e.json().then((function(e){console.log(e)}))}))}}])&&T(t.prototype,n),e}(),B={formSelector:".popup__input",submitButtonSelector:".popup__button",inputContainerSelector:".popup__name-container",inputSelector:".popup__name",inputErrorSelector:".popup__name.popup__name_type_err",disabledButtonSelector:".popup__container_new-card .popup__button"},U=document.querySelector(".profile").querySelector(".profile__button"),A=document.querySelector(".profile__button-add"),V=Array.from(document.querySelectorAll(B.formSelector)),D=new o({nameSelector:".profile__info-title",aboutSelector:".profile__info-subtitle"}),F=new u({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){return j(e.name,e.link)}},".elements"),H=new v(".popup.popup_type_image"),M=new w(".popup.popup_type_edit",(function(e,t){e.preventDefault();var n=t.name,r=t.job;D.setUserInfo({name:n,job:r})}),D),z=new w(".popup.popup_type_new-card",(function(e,t){e.preventDefault();var r=t.mesto,o=t.link;F.addItem(j(r,o)),n(B)}),D),N=(new x(".popup.popup_type_confirm",(function(){})),document.querySelector(".popup_type_new-card"),new I({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26",headers:{authorization:"82256f25-365c-46ac-aa1f-a846129f6d77","Content-Type":"application/json"}}));V.forEach((function(e){new t(B,e).enableValidations()})),F.render(),H.setEventListeners(),M.setEventListeners(),z.setEventListeners(),U.addEventListener("click",(function(){M.open(),function(e){var t=document.querySelector("#name"),n=document.querySelector("#job"),r=e.getUserInfo(),o=r.name,i=r.about;t.value=o,n.value=i}(D)})),A.addEventListener("click",z.open),N.test()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2hhbmRsZXJzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJhbGxDbGFzc2VzIiwiZm9ybSIsInRoaXMiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsImZvcm1CdXR0b24iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2Rpc2FibGVCdXR0b24iLCJjaGVja1ZhbGlkaXR5IiwiZGlzYWJsZWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYnV0dG9uIiwiZm9ybUlucHV0cyIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0RXJyb3JTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiX3ZhbGlkYXRlSW5wdXQiLCJ0YXJnZXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb250YWluZXJTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMiLCJkaXNhYmxlU3VibWl0QnV0dG9ucyIsImRvY3VtZW50IiwiZGlzYWJsZWRCdXR0b25TZWxlY3RvciIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsIm5hbWUiLCJhYm91dCIsImpvYiIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXIiLCJpdGVtIiwicmVuZGVyZWRJdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cCIsIm9wZW4iLCJiaW5kIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXlDb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbG9zZVBvcHVwRXNjIiwicmVtb3ZlIiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsImNhcmQiLCJzcmMiLCJhbHQiLCJzdWJ0aXRsZSIsImNsb3Nlc3QiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybUhhbmRsZXIiLCJ2YWx1ZXMiLCJpZCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImxpbmsiLCJ0ZW1wbGF0ZSIsInRvZ2dsZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJuZXdDYXJkIiwiX2FkZExpa2UiLCJfZGVsZXRlQ2FyZCIsIl9zaG93UGhvdG8iLCJfZ2V0VGVtcGxhdGUiLCJtZXN0byIsIl9zZXRFdmVudExpc3RlbmVycyIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsImNyZWF0ZU1lc3RvQ2FyZCIsIlBvcHVwV2l0aFN1Ym1pdCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbkFkZCIsImZvcm1zIiwidXNlckluZm8iLCJzZWN0aW9uIiwicG9wdXBXaXRoVXNlckZvcm0iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwV2l0aEFkZE1lc3RvRm9ybSIsImFwaSIsImF1dGhvcml6YXRpb24iLCJlbmFibGVWYWxpZGF0aW9ucyIsInJlbmRlciIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZ2V0VXNlckluZm8iLCJzZXRJbnB1dFZhbHVlcyIsInRlc3QiXSwibWFwcGluZ3MiOiJ5TEFFTyxJQUFNQSxFQUFiLFdBQ0UsV0FBWUMsRUFBWUMsSSw0RkFBTSxTQUM1QkMsS0FBS0YsV0FBYUEsRUFDbEJFLEtBQUtELEtBQU9BLEUsUUFIaEIsTyxFQUFBLEcsRUFBQSw2QkFNRSxTQUFlRSxFQUFPQyxFQUFjQyxHQUM3QkYsRUFBTUcsU0FBU0MsTUFJbEJMLEtBQUtNLGdCQUFnQkosSUFIckJGLEtBQUtPLGdCQUFnQk4sRUFBT0MsR0FDNUJGLEtBQUtRLGVBQWVMLElBSWxCSCxLQUFLRCxLQUFLVSxrQkFDWk4sRUFBV08sVUFBVyxLQWQ1Qiw2QkFrQkUsU0FBZ0JULEVBQU9DLEdBQ3JCQSxFQUFhUyxZQUFjVixFQUFNVyxvQkFuQnJDLDRCQXNCRSxTQUFlQyxHQUNiQSxFQUFPSCxVQUFXLElBdkJ0Qiw2QkEwQkUsU0FBZ0JSLEdBQ2RBLEVBQWFTLFlBQWMsS0EzQi9CLHFDQThCRSxTQUF3QlIsRUFBWVcsR0FBWSxXQUM5Q0EsRUFBV0MsU0FBUSxTQUFBZCxH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QUE2QjRDLEVBQUsxQyxHQUN2QzBDLEVBQUlDLGlCQUVKLElBQVE3RSxFQUFja0MsRUFBZGxDLEtBQU1FLEVBQVFnQyxFQUFSaEMsSUFDZHVFLGNBQXFCLENBQUV6RSxPQUFNRSxVRHFEbUV1RSxHQUNyRkssRUFBd0IsSUFBSTlDLEVBQWMsOEJDbkRoRCxTQUE4QmpELEVBQUdtRCxHQUN0Q25ELEVBQUU4RixpQkFFRixJQUFRekIsRUFBZ0JsQixFQUFoQmtCLE1BQU9WLEVBQVNSLEVBQVRRLEtBRWZnQyxVQUFnQnBCLEVBQVdGLEVBQU9WLElBQ2xDbEQsRUFBcUJoQyxLRDZDb0ZpSCxHQUk5Rk0sR0FIYyxJQUFJdEIsRUFBZ0IsNkJBQTZCLGVBQ3BEaEUsU0FBU2QsY0FBYyx3QkFFNUIsSUFBSWdGLEVBQUksQ0FDekJDLFFBQVMsOENBQ1RDLFFBQVMsQ0FDUG1CLGNBQWUsdUNBQ2YsZUFBZ0IsdUJFN0NwQlIsV0FBYyxTQUFVL0csR0FDQSxJQUFJRixFQUFjQyxFQUFZQyxHQUN0Q3dILHVCQUdoQlAsRUFBUVEsU0FFUjNCLEVBQWVHLG9CQUNmaUIsRUFBa0JqQixvQkFDbEJvQixFQUFzQnBCLG9CQUN0QlksRUFBY3hGLGlCQUFpQixTQUFTLFdBQ3RDNkYsU0FwQkYsU0FBd0JGLEdBQ3RCLElBQU1VLEVBQVkxRixTQUFTZCxjQUFjLFNBQ25DeUcsRUFBVzNGLFNBQVNkLGNBQWMsUUFDeEMsRUFBd0I4RixFQUFTWSxjQUF6QnJGLEVBQVIsRUFBUUEsS0FBTUMsRUFBZCxFQUFjQSxNQUVka0YsRUFBVS9DLE1BQVFwQyxFQUNsQm9GLEVBQVNoRCxNQUFRbkMsRUFlakJxRixDQUFlYixNQUVqQkYsRUFBaUJ6RixpQkFBaUIsUUFBU2dHLEVBQXNCL0QsTUFFakVnRSxFQUFJUSxRIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihhbGxDbGFzc2VzLCBmb3JtKSB7XG4gICAgdGhpcy5hbGxDbGFzc2VzID0gYWxsQ2xhc3NlcztcbiAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICB9XG5cbiAgX3ZhbGlkYXRlSW5wdXQoaW5wdXQsIGVycm9yRWxlbWVudCwgZm9ybUJ1dHRvbikge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBlcnJvckVsZW1lbnQpO1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbihmb3JtQnV0dG9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZXJyb3JFbGVtZW50KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZm9ybS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgIGZvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihlcnJvckVsZW1lbnQpIHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoZm9ybUJ1dHRvbiwgZm9ybUlucHV0cykge1xuICAgIGZvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dFNlbGVjdG9yKVxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXQucXVlcnlTZWxlY3Rvcih0aGlzLmFsbENsYXNzZXMuaW5wdXRFcnJvclNlbGVjdG9yKTtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXQoZS50YXJnZXQsIGVycm9yRWxlbWVudCwgZm9ybUJ1dHRvbik7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbnMoKSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IEFycmF5LmZyb20odGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5hbGxDbGFzc2VzLmlucHV0Q29udGFpbmVyU2VsZWN0b3IpKTtcbiAgICBjb25zdCBmb3JtQnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5hbGxDbGFzc2VzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoZm9ybUJ1dHRvbiwgZm9ybUlucHV0cyk7XG4gICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbnModGhpcy5hbGxDbGFzc2VzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoYWxsQ2xhc3Nlcykge1xuICBjb25zdCBkaXNhYmxlZEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWxsQ2xhc3Nlcy5kaXNhYmxlZEJ1dHRvblNlbGVjdG9yKSk7XG4gIGRpc2FibGVkQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Rm9ybXNFcnJvcnMoZm9ybXMsIGFsbENsYXNzZXMpIHtcbiAgZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYWxsQ2xhc3Nlcy5pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgIGVycm9yRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiKTtcbiAgfSlcbn1cblxuXG5cblxuXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5wcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5wcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMucHJvZmlsZVRpdGxlLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMucHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMucHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50ID0gam9iO1xuICB9XG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJlZEl0ZW0gPSB0aGlzLnJlbmRlcmVyKGl0ZW0pO1xuICAgICAgdGhpcy5hZGRJdGVtKHJlbmRlcmVkSXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJjb25zdCBFU0NBUEVfS0VZQ09ERSA9IDI3O1xuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICB0aGlzLnBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cEVzYyk7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNsb3NlSWNvbiA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1pY29uJyk7XG4gICAgY2xvc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XG4gICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cblxuXG5cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKGUpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgY2FyZC5zcmMgPSBlLnRhcmdldC5zcmM7XG4gICAgY2FyZC5hbHQgPSBlLnRhcmdldC5hbHQ7XG4gICAgY29uc3QgcGFyZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lc3RvLWNhcmQnKTtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbmFtZScpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0JykudGV4dENvbnRlbnQgPSBzdWJ0aXRsZS50ZXh0Q29udGVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHN1Ym1pdEZvcm1IYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIgPSBzdWJtaXRGb3JtSGFuZGxlcjtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB2YWx1ZXNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIoZSwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5saW5rID0gbGluaztcbiAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIC8qKiDQn9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIF9hZGRMaWtlKGUpIHtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoZSkge1xuICAgIGNvbnN0IGNhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZCcpO1xuICAgIGNhcmQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2hvd1Bob3RvKGUpIHtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayhlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMobmV3Q2FyZCkge1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2FkZExpa2UpO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVDYXJkKTtcbiAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19waG90bycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX3Nob3dQaG90byhlKSk7XG4gIH1cblxuICBjcmVhdGVNZXN0b0NhcmQoKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgbWVzdG8gPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19waG90bycpO1xuICAgIG1lc3RvLnNyYyA9IHRoaXMubGluaztcbiAgICBtZXN0by5hbHQgPSB0aGlzLm5hbWU7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMobmV3Q2FyZCk7XG4gICAgcmV0dXJuIG5ld0NhcmQ7XG4gIH1cbn07XG5cbiIsImltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9DYXJkcy5qcyc7XG5pbXBvcnQgeyBwb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgeyBuYW1lLCBsaW5rIH0sXG4gICAgJyNtZXN0by1jYXJkJyxcbiAgICAoZSkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihlKSxcbiAgKTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlTWVzdG9DYXJkKCk7XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBzdWJtaXRGb3JtSGFuZGxlcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyID0gc3VibWl0Rm9ybUhhbmRsZXI7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zZXRFdmVudExpc3RlbmVycylcbiAgfVxufSIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAvLyAuLi5cbiAgfVxuXG4gIHRlc3QoKSB7XG4gICAgZmV0Y2godGhpcy5iYXNlVXJsLCB0aGlzLmhlYWRlcnMpXG4gICAgICAudGhlbihcbiAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgIHJlcy5qc29uKCkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vU2VjdGlvbi5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVTdWJtaXQsIGhhbmRsZUFkZE1lc3RvU3VibWl0IH0gZnJvbSAnLi9oYW5kbGVycy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkIH0gZnJvbSAnLi9oZWxwZXJzLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9IGZyb20gJy4uL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9BcGkuanMnO1xuXG5leHBvcnQgY29uc3QgYWxsQ2xhc3NlcyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbnB1dENvbnRhaW5lclNlbGVjdG9yOiAnLnBvcHVwX19uYW1lLWNvbnRhaW5lcicsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX25hbWUnLFxuICBpbnB1dEVycm9yU2VsZWN0b3I6ICcucG9wdXBfX25hbWUucG9wdXBfX25hbWVfdHlwZV9lcnInLFxuICBkaXNhYmxlZEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXJfbmV3LWNhcmQgLnBvcHVwX19idXR0b24nLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xuICB9XG5dO1xuXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhbGxDbGFzc2VzLmZvcm1TZWxlY3RvcikpO1xuXG5leHBvcnQgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9faW5mby10aXRsZScsXG4gIGFib3V0U2VsZWN0b3I6ICcucHJvZmlsZV9faW5mby1zdWJ0aXRsZScsXG59KTtcblxuZXhwb3J0IGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoeyBuYW1lLCBsaW5rIH0pID0+IGNyZWF0ZUNhcmQobmFtZSwgbGluayksXG59LCAnLmVsZW1lbnRzJyk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhVc2VyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAucG9wdXBfdHlwZV9lZGl0JywgaGFuZGxlUHJvZmlsZVN1Ym1pdCwgdXNlckluZm8pO1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEFkZE1lc3RvRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAucG9wdXBfdHlwZV9uZXctY2FyZCcsIGhhbmRsZUFkZE1lc3RvU3VibWl0LCB1c2VySW5mbyk7XG5leHBvcnQgY29uc3QgcG9wdXBTdWJtaXQgPSBuZXcgUG9wdXBXaXRoU3VibWl0KCcucG9wdXAucG9wdXBfdHlwZV9jb25maXJtJywgKCkgPT4geyB9KTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9uZXctY2FyZFwiKTtcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNicsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnODIyNTZmMjUtMzY1Yy00NmFjLWFhMWYtYTg0NjEyOWY2ZDc3JyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuIiwiaW1wb3J0IHsgZGlzYWJsZVN1Ym1pdEJ1dHRvbnMgfSBmcm9tICcuLi9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhcmQgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgdXNlckluZm8sIHNlY3Rpb24sIGFsbENsYXNzZXMgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9maWxlU3VibWl0KGV2dCwgdmFsdWVzKSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB2YWx1ZXM7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQWRkTWVzdG9TdWJtaXQoZSwgdmFsdWVzKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCB7IG1lc3RvLCBsaW5rIH0gPSB2YWx1ZXM7XG5cbiAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobWVzdG8sIGxpbmspKTtcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoYWxsQ2xhc3Nlcyk7XG59XG4iLCJpbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7XG4gIGFsbENsYXNzZXMsXG4gIGZvcm1zLFxuICBwb3B1cFdpdGhJbWFnZSxcbiAgcG9wdXBXaXRoVXNlckZvcm0sXG4gIHBvcHVwV2l0aEFkZE1lc3RvRm9ybSxcbiAgdXNlckluZm8sXG4gIHByb2ZpbGVCdXR0b24sXG4gIHByb2ZpbGVCdXR0b25BZGQsXG4gIHNlY3Rpb24sXG4gIGFwaVxufSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5mdW5jdGlvbiBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbykge1xuICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xuICBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqb2InKTtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IGFib3V0O1xufVxuXG5mb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uIChmb3JtKSB7XG4gIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhbGxDbGFzc2VzLCBmb3JtKTtcbiAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9ucygpO1xufSk7XG5cbnNlY3Rpb24ucmVuZGVyKCk7XG5cbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhVc2VyRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoQWRkTWVzdG9Gb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cFdpdGhVc2VyRm9ybS5vcGVuKCk7XG4gIHNldElucHV0VmFsdWVzKHVzZXJJbmZvKTtcbn0pO1xucHJvZmlsZUJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBvcHVwV2l0aEFkZE1lc3RvRm9ybS5vcGVuKVxuXG5hcGkudGVzdCgpOyJdLCJzb3VyY2VSb290IjoiIn0=