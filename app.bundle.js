(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.allClasses=e,this.form=n}var r,o;return r=t,(o=[{key:"_validateInput",value:function(e,t,n){e.validity.valid?this._hideInputError(t):(this._showInputError(e,t),this._disableButton(n)),this.form.checkValidity()&&(n.disabled=!1)}},{key:"_showInputError",value:function(e,t){t.textContent=e.validationMessage}},{key:"_disableButton",value:function(e){e.disabled=!0}},{key:"_hideInputError",value:function(e){e.textContent=""}},{key:"_addValidationsToInputs",value:function(e,t){var n=this;t.forEach((function(t){var r=t.querySelector(n.allClasses.inputSelector),o=t.querySelector(n.allClasses.inputErrorSelector);r.addEventListener("input",(function(t){n._validateInput(t.target,o,e)}))}))}},{key:"enableValidations",value:function(){var e=Array.from(this.form.querySelectorAll(this.allClasses.inputContainerSelector)),t=this.form.querySelector(this.allClasses.submitButtonSelector);this._addValidationsToInputs(t,e),n(this.allClasses)}}])&&e(r.prototype,o),t}();function n(e){Array.from(document.querySelectorAll(e.disabledButtonSelector)).forEach((function(e){e.disabled=!0}))}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileTitle=document.querySelector(n),this.profileSubtitle=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.profileTitle.textContent,about:this.profileSubtitle.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this.profileTitle.textContent=t,this.profileSubtitle.textContent=n}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.api,o=t.renderer,i=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=r,this.userInfo=i,this.renderer=o,this.container=document.querySelector(n),this.onSuccess=this.onSuccess.bind(this)}var t,n;return t=e,(n=[{key:"initCards",value:function(){this.api.getInitialCards(this.onSuccess)}},{key:"onSuccess",value:function(e){this.items=e,this.render()}},{key:"render",value:function(){var e=this,t=this.userInfo.getUserInfo();this.items.forEach((function(n){var r=e.renderer(n,t);e.addItem(r)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&i(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.submitButton=this.popup.querySelector('button[type="submit"]'),this.submitButton&&(this.defaultSubmitButtonText=this.submitButton.textContent),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){27===e.keyCode&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this.popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleClosePopupEsc),this.popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-icon").addEventListener("click",this.close),this.popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}},{key:"updateSubmitButtonText",value:function(e){this.submitButton&&(this.submitButton.textContent=e)}},{key:"resetSubmitButtonText",value:function(){this.updateSubmitButtonText(this.defaultSubmitButtonText)}}])&&c(t.prototype,n),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){p(y(u.prototype),"open",this).call(this);var t=this.popup.querySelector("img");t.src=e.target.src,t.alt=e.target.alt;var n=e.target.closest(".mesto-card").querySelector(".mesto-card__subtitle-name");this.popup.querySelector(".popup__text").textContent=n.textContent}}])&&f(t.prototype,n),u}(a);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e)).submitFormHandler=t,n.form=n.popup.querySelector("form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this.form.querySelectorAll("input").forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;_(w(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){e.updateSubmitButtonText("Сохранение..."),e.submitFormHandler(t,e._getInputValues(),(function(){e.close(),e.resetSubmitButtonText()}))}))}},{key:"close",value:function(){_(w(u.prototype),"close",this).call(this),this.form.reset()}}])&&b(t.prototype,n),u}(a);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n,r,o,i,u){var c=n.name,a=n.link,s=n.likes,l=n.id,f=n.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=l,this.api=t,this.name=c,this.link=a,this.likes=s,this.owner=f,this.currentUser=r,this.template=document.querySelector(o),this.handleCardClick=i,this.handleDeleteClick=u}var t,n;return t=e,(n=[{key:"_addLike",value:function(e){var t=e.target.closest(".mesto-card__subtitle-like").querySelector(".mesto-card__subtitle-icon-like");e.target.classList.contains("mesto-card__subtitle-icon_active")?this.api.updateLike(this.id,(function(n){e.target.classList.remove("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length}),!0):this.api.updateLike(this.id,(function(n){e.target.classList.add("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length}))}},{key:"_deleteCard",value:function(e){var t=e.target.closest(".mesto-card");this.api.deleteCard(this.id,(function(){t.remove()}))}},{key:"_onDeleteButtonClick",value:function(e){var t=this;this.handleDeleteClick((function(){t._deleteCard(e)}))}},{key:"_showPhoto",value:function(e){this.handleCardClick(e)}},{key:"_getTemplate",value:function(){return this.template.content.cloneNode(!0)}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".mesto-card__subtitle-icon").addEventListener("click",(function(e){return t._addLike(e)})),e.querySelector(".mesto-card__trash").addEventListener("click",(function(e){return t._onDeleteButtonClick(e)})),e.querySelector(".mesto-card__photo").addEventListener("click",(function(e){return t._showPhoto(e)}))}},{key:"_showTrash",value:function(e){this.currentUser.name===this.owner&&(e.querySelector(".mesto-card__trash").style.display="block")}},{key:"_showIsLiked",value:function(e){var t=this;this.likes.find((function(e){return e.name===t.currentUser.name}))&&e.querySelector(".mesto-card__subtitle-icon").classList.add("mesto-card__subtitle-icon_active")}},{key:"createMestoCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".mesto-card__photo"),n=e.querySelector(".mesto-card__subtitle-icon-like");return t.src=this.link,t.alt=this.name,n.textContent=this.likes.length,e.querySelector(".mesto-card__subtitle-name").textContent=this.name,this._showTrash(e),this._showIsLiked(e),this._setEventListeners(e),e}}])&&E(t.prototype,n),e}();function j(e,t,n,r,o){return new C(W,{name:e,link:t,likes:n,id:r},o,"#mesto-card",J.open,K.open).createMestoCard()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).form=t.popup.querySelector("form"),t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;L(x(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitFormHandler(),e.close()}))}},{key:"open",value:function(e){L(x(u.prototype),"open",this).call(this),this.submitFormHandler=e}}])&&P(t.prototype,n),u}(a);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(e){fetch(this.baseUrl+"cards",{headers:this.headers}).then((function(t){if(!t.ok)return Promise.reject("Ошибка: ".concat(t.status));t.json().then((function(t){return e(t)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"getInfoAboutPeople",value:function(e){fetch(this.baseUrl+"users/me/",{headers:this.headers}).then((function(t){if(!t.ok)return Promise.reject("Ошибка: ".concat(t.status));t.json().then((function(t){return e(t)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateEditProfile",value:function(e,t){fetch(this.baseUrl+"users/me/",{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));t()})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateEditAvatar",value:function(e,t){fetch(this.baseUrl+"users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(n){if(!n.ok)return Promise.reject("Ошибка: ".concat(n.status));t(e)})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"addNewСard",value:function(e,t){fetch(this.baseUrl+"cards",{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"deleteCard",value:function(e,t){fetch(this.baseUrl+"cards/"+e,{method:"DELETE",headers:this.headers}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateLike",value:function(e,t,n){fetch(this.baseUrl+"cards/likes/"+e,{method:n?"DELETE":"PUT",headers:this.headers}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}}])&&R(t.prototype,n),e}(),U={formSelector:".popup__input",submitButtonSelector:".popup__button",inputContainerSelector:".popup__name-container",inputSelector:".popup__name",inputErrorSelector:".popup__name.popup__name_type_err",disabledButtonSelector:".popup__container_new-card .popup__button",nameSelector:".profile__info-title"},A=document.querySelector(".profile").querySelector(".profile__button"),D=document.querySelector(".profile__button-add"),V=(document.querySelector(".mesto-card__trash"),document.querySelector(U.nameSelector)),H=document.querySelector(".profile__info-subtitle"),N=document.querySelector(".profile__foto"),F=Array.from(document.querySelectorAll(U.formSelector)),M=new o({nameSelector:U.nameSelector,aboutSelector:".profile__info-subtitle"}),J=new m(".popup.popup_type_image"),z=new g(".popup.popup_type_edit",(function(e,t,n){e.preventDefault();var r=t.name,o=t.job;M.setUserInfo({name:r,job:o}),W.updateEditProfile({name:r,about:o},n)}),M),G=new g(".popup.popup_type_new-card",(function(e,t,r){e.preventDefault();var o=t.mesto,i=t.link;W["addNewСard"]({name:o,link:i},(function(e){var t=e.name,o=e.owner,u=e.likes,c=e._id;r();var a=M.getUserInfo().name===o.name;X.addItem(j(t,i,u,c,a)),n(U)}))}),M),K=new I(".popup.popup_type_confirm"),Q=(document.querySelector(".popup_type_new-card"),new g(".popup.popup_type_update",(function(e,t,n){e.preventDefault(),W.updateEditAvatar(t["link-avatar"],(function(e){n(),N.src=e}))}))),W=new B({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"82256f25-365c-46ac-aa1f-a846129f6d77","Content-Type":"application/json","Access-Control-Allow-Methods":"POST, GET, DELETE"}}),X=new u({api:W,renderer:function(e,t){return j(e.name,e.link,e.likes,e._id,t)},userInfo:M},".elements");function Y(e){var t=document.querySelector("#name"),n=document.querySelector("#job"),r=e.getUserInfo(),o=r.name,i=r.about;t.value=o,n.value=i}F.forEach((function(e){new t(U,e).enableValidations()})),J.setEventListeners(),z.setEventListeners(),G.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),A.addEventListener("click",(function(){z.open(),Y(M)})),N.addEventListener("click",(function(){Q.open(),Y(M)})),D.addEventListener("click",G.open),W.getInfoAboutPeople((function(e){V.textContent=e.name,H.textContent=e.about,N.src=e.avatar,X.initCards()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2hhbmRsZXJzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJhbGxDbGFzc2VzIiwiZm9ybSIsInRoaXMiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsImZvcm1CdXR0b24iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2Rpc2FibGVCdXR0b24iLCJjaGVja1ZhbGlkaXR5IiwiZGlzYWJsZWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYnV0dG9uIiwiZm9ybUlucHV0cyIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0RXJyb3JTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiX3ZhbGlkYXRlSW5wdXQiLCJ0YXJnZXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb250YWluZXJTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMiLCJkaXNhYmxlU3VibWl0QnV0dG9ucyIsImRvY3VtZW50IiwiZGlzYWJsZWRCdXR0b25TZWxlY3RvciIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsIm5hbWUiLCJhYm91dCIsImpvYiIsIlNlY3Rpb24iLCJzZWxlY3RvciIsImFwaSIsInJlbmRlcmVyIiwidXNlckluZm8iLCJjb250YWluZXIiLCJvblN1Y2Nlc3MiLCJiaW5kIiwiZ2V0SW5pdGlhbENhcmRzIiwiZGF0YSIsIml0ZW1zIiwicmVuZGVyIiwiY3VycmVudFVzZXIiLCJnZXRVc2VySW5mbyIsIml0ZW0iLCJyZW5kZXJlZEl0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwIiwic3VibWl0QnV0dG9uIiwiZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQiLCJvcGVuIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXlDb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbG9zZVBvcHVwRXNjIiwicmVtb3ZlIiwiY29udGFpbnMiLCJ0ZXh0IiwidXBkYXRlU3VibWl0QnV0dG9uVGV4dCIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZCIsInNyYyIsImFsdCIsInN1YnRpdGxlIiwiY2xvc2VzdCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtSGFuZGxlciIsInZhbHVlcyIsImlkIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldFN1Ym1pdEJ1dHRvblRleHQiLCJyZXNldCIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJsaW5rIiwibGlrZXMiLCJvd25lciIsInRlbXBsYXRlIiwibGlrZUNvdW50Q29udGFpbmVyIiwidXBkYXRlTGlrZSIsImxlbmd0aCIsImRlbGV0ZUNhcmQiLCJfZGVsZXRlQ2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJuZXdDYXJkIiwiX2FkZExpa2UiLCJfb25EZWxldGVCdXR0b25DbGljayIsIl9zaG93UGhvdG8iLCJzdHlsZSIsImRpc3BsYXkiLCJmaW5kIiwiZWx0IiwiX2dldFRlbXBsYXRlIiwibWVzdG8iLCJsaWtlIiwiX3Nob3dUcmFzaCIsIl9zaG93SXNMaWtlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwU3VibWl0IiwiY3JlYXRlTWVzdG9DYXJkIiwiUG9wdXBXaXRoU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJvblN1Ym1pdCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwianNvbiIsImNhdGNoIiwiZXJyIiwicHJvZmlsZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhclVybCIsImF2YXRhciIsImNhcmREYXRhIiwiY2FyZElkIiwiaXNEZWxldGUiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbkFkZCIsIm5hbWVDb250YWluZXIiLCJhYm91dENvbnRhaW5lciIsImZvdG9Db250YWluZXIiLCJmb3JtcyIsInBvcHVwV2l0aFVzZXJGb3JtIiwiZXZ0IiwicG9wdXBXaXRoQWRkTWVzdG9Gb3JtIiwiX2lkIiwiaXNPd25lciIsInNlY3Rpb24iLCJwb3B1cEVkaXRBdmF0YXIiLCJhdXRob3JpemF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImVuYWJsZVZhbGlkYXRpb25zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRJbmZvQWJvdXRQZW9wbGUiXSwibWFwcGluZ3MiOiJ5TEFFTyxJQUFNQSxFQUFiLFdBQ0UsV0FBWUMsRUFBWUMsSSw0RkFBTSxTQUM1QkMsS0FBS0YsV0FBYUEsRUFDbEJFLEtBQUtELEtBQU9BLEUsUUFIaEIsTyxFQUFBLEcsRUFBQSw2QkFNRSxTQUFlRSxFQUFPQyxFQUFjQyxHQUM3QkYsRUFBTUcsU0FBU0MsTUFJbEJMLEtBQUtNLGdCQUFnQkosSUFIckJGLEtBQUtPLGdCQUFnQk4sRUFBT0MsR0FDNUJGLEtBQUtRLGVBQWVMLElBSWxCSCxLQUFLRCxLQUFLVSxrQkFDWk4sRUFBV08sVUFBVyxLQWQ1Qiw2QkFrQkUsU0FBZ0JULEVBQU9DLEdBQ3JCQSxFQUFhUyxZQUFjVixFQUFNVyxvQkFuQnJDLDRCQXNCRSxTQUFlQyxHQUNiQSxFQUFPSCxVQUFXLElBdkJ0Qiw2QkEwQkUsU0FBZ0JSLEdBQ2RBLEVBQWFTLFlBQWMsS0EzQi9CLHFDQThCRSxTQUF3QlIsRUFBWVcsR0FBWSxXQUM5Q0EsRUFBV0MsU0FBUSxTQUFBZCxHQUNqQixJQUFNZSxFQUFlZixFQUFNZ0IsY0FBYyxFQUFLbkIsV0FBV29CLGVBQ25EaEIsRUFBZUQsRUFBTWdCLGNBQWMsRUFBS25CLFdBQVdxQixvQkFDekRILEVBQWFJLGlCQUFpQixTQUFTLFNBQUNDLEdBQ3RDLEVBQUtDLGVBQWVELEVBQUVFLE9BQVFyQixFQUFjQyxXQW5DcEQsK0JBd0NFLFdBQ0UsSUFBTVcsRUFBYVUsTUFBTUMsS0FBS3pCLEtBQUtELEtBQUsyQixpQkFBaUIxQixLQUFLRixXQUFXNkIseUJBQ25FeEIsRUFBYUgsS0FBS0QsS0FBS2tCLGNBQWNqQixLQUFLRixXQUFXOEIsc0JBRTNENUIsS0FBSzZCLHdCQUF3QjFCLEVBQVlXLEdBQ3pDZ0IsRUFBcUI5QixLQUFLRixpQixpQkE3QzlCLEtBaURPLFNBQVNnQyxFQUFxQmhDLEdBQ1gwQixNQUFNQyxLQUFLTSxTQUFTTCxpQkFBaUI1QixFQUFXa0MseUJBQ3hEakIsU0FBUSxTQUFBRixHQUN0QkEsRUFBT0gsVUFBVyxLLHNLQ3REZixJQUFNdUIsRUFBYixXQUNFLGNBQTZDLElBQS9CQyxFQUErQixFQUEvQkEsYUFBY0MsRUFBaUIsRUFBakJBLGUsNEZBQWlCLFNBQzNDbkMsS0FBS29DLGFBQWVMLFNBQVNkLGNBQWNpQixHQUMzQ2xDLEtBQUtxQyxnQkFBa0JOLFNBQVNkLGNBQWNrQixHLFFBSGxELE8sRUFBQSxHLEVBQUEsMEJBTUUsV0FDRSxNQUFPLENBQ0xHLEtBQU10QyxLQUFLb0MsYUFBYXpCLFlBQ3hCNEIsTUFBT3ZDLEtBQUtxQyxnQkFBZ0IxQixlQVRsQyx5QkFhRSxZQUEyQixJQUFiMkIsRUFBYSxFQUFiQSxLQUFNRSxFQUFPLEVBQVBBLElBQ2xCeEMsS0FBS29DLGFBQWF6QixZQUFjMkIsRUFDaEN0QyxLQUFLcUMsZ0JBQWdCMUIsWUFBYzZCLE8saUJBZnZDLEssc0tDQU8sSUFBTUMsRUFBYixXQUNFLGFBQXlDQyxHQUFVLElBQXJDQyxFQUFxQyxFQUFyQ0EsSUFBS0MsRUFBZ0MsRUFBaENBLFNBQVVDLEVBQXNCLEVBQXRCQSxVLDRGQUFzQixTQUNqRDdDLEtBQUsyQyxJQUFNQSxFQUNYM0MsS0FBSzZDLFNBQVdBLEVBQ2hCN0MsS0FBSzRDLFNBQVdBLEVBQ2hCNUMsS0FBSzhDLFVBQVlmLFNBQVNkLGNBQWN5QixHQUN4QzFDLEtBQUsrQyxVQUFZL0MsS0FBSytDLFVBQVVDLEtBQUtoRCxNLFFBTnpDLE8sRUFBQSxHLEVBQUEsd0JBU0UsV0FDRUEsS0FBSzJDLElBQUlNLGdCQUFnQmpELEtBQUsrQyxhQVZsQyx1QkFhRSxTQUFVRyxHQUNSbEQsS0FBS21ELE1BQVFELEVBQ2JsRCxLQUFLb0QsV0FmVCxvQkFrQkUsV0FBUyxXQUNEQyxFQUFjckQsS0FBSzZDLFNBQVNTLGNBRWxDdEQsS0FBS21ELE1BQU1wQyxTQUFRLFNBQUF3QyxHQUNqQixJQUFNQyxFQUFlLEVBQUtaLFNBQVNXLEVBQU1GLEdBQ3pDLEVBQUtJLFFBQVFELFFBdkJuQixxQkEyQkUsU0FBUUUsR0FDTjFELEtBQUs4QyxVQUFVYSxRQUFRRCxRLGlCQTVCM0IsSyxzS0NBQSxJQUVhRSxFQUFiLFdBQ0UsV0FBWWxCLEksNEZBQVUsU0FDcEIxQyxLQUFLNkQsTUFBUTlCLFNBQVNkLGNBQWN5QixHQUNwQzFDLEtBQUs4RCxhQUFlOUQsS0FBSzZELE1BQU01QyxjQUFjLHlCQUV6Q2pCLEtBQUs4RCxlQUNQOUQsS0FBSytELHdCQUEwQi9ELEtBQUs4RCxhQUFhbkQsYUFHbkRYLEtBQUtnRSxLQUFPaEUsS0FBS2dFLEtBQUtoQixLQUFLaEQsTUFDM0JBLEtBQUtpRSxNQUFRakUsS0FBS2lFLE1BQU1qQixLQUFLaEQsTUFDN0JBLEtBQUtrRSxnQkFBa0JsRSxLQUFLa0UsZ0JBQWdCbEIsS0FBS2hELE0sUUFYckQsTyxFQUFBLEcsRUFBQSw4QkFjRSxTQUFnQnFCLEdBaEJLLEtBaUJmQSxFQUFFOEMsU0FDSm5FLEtBQUtpRSxVQWhCWCxrQkFvQkUsV0FDRWxDLFNBQVNYLGlCQUFpQixVQUFXcEIsS0FBS2tFLGlCQUMxQ2xFLEtBQUs2RCxNQUFNTyxVQUFVQyxJQUFJLGtCQXRCN0IsbUJBeUJFLFdBQ0V0QyxTQUFTdUMsb0JBQW9CLFVBQVd0RSxLQUFLdUUsc0JBQzdDdkUsS0FBSzZELE1BQU1PLFVBQVVJLE9BQU8sa0JBM0JoQywrQkE4QkUsV0FBb0IsV0FDQXhFLEtBQUs2RCxNQUFNNUMsY0FBYyxzQkFDakNHLGlCQUFpQixRQUFTcEIsS0FBS2lFLE9BQ3pDakUsS0FBSzZELE1BQU16QyxpQkFBaUIsU0FBUyxTQUFDQyxHQUNwQkEsRUFBRUUsT0FDTjZDLFVBQVVLLFNBQVMsVUFDN0IsRUFBS1IsYUFwQ2Isb0NBeUNFLFNBQXVCUyxHQUNqQjFFLEtBQUs4RCxlQUNQOUQsS0FBSzhELGFBQWFuRCxZQUFjK0QsS0EzQ3RDLG1DQStDRSxXQUNFMUUsS0FBSzJFLHVCQUF1QjNFLEtBQUsrRCw4QixpQkFoRHJDLEssNHFDQ0FPLElBQU1hLEVBQWIsYSxrT0FBQSxVLFFBQUEsRyxFQUFBLEUsK1lBQUEsNkQsRUFBQSxHLEVBQUEsbUJBQ0UsU0FBS3ZELEdBQ0gseUNBQ0EsSUFBTXdELEVBQU83RSxLQUFLNkQsTUFBTTVDLGNBQWMsT0FDdEM0RCxFQUFLQyxJQUFNekQsRUFBRUUsT0FBT3VELElBQ3BCRCxFQUFLRSxJQUFNMUQsRUFBRUUsT0FBT3dELElBQ3BCLElBQ01DLEVBRFMzRCxFQUFFRSxPQUFPMEQsUUFBUSxlQUNSaEUsY0FBYyw4QkFDdENqQixLQUFLNkQsTUFBTTVDLGNBQWMsZ0JBQWdCTixZQUFjcUUsRUFBU3JFLGlCLGlCQVJwRSxHQUFvQ2lELEcsOGtDQ0E3QixJQUFNc0IsRUFBYixhLGtPQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDRSxXQUFZeEMsRUFBVXlDLEdBQW1CLGEsNEZBQUEsVUFDdkMsY0FBTXpDLElBQ0R5QyxrQkFBb0JBLEVBQ3pCLEVBQUtwRixLQUFPLEVBQUs4RCxNQUFNNUMsY0FBYyxRQUhFLEVBRDNDLE8sRUFBQSxHLEVBQUEsOEJBT0UsV0FDRSxJQUFNbUUsRUFBUyxHQUtmLE9BSEFwRixLQUFLRCxLQUFLMkIsaUJBQWlCLFNBQVNYLFNBQVEsU0FBQ2QsR0FDM0NtRixFQUFPbkYsRUFBTW9GLElBQU1wRixFQUFNcUYsU0FFcEJGLElBYlgsK0JBZ0JFLFdBQW9CLFdBQ2xCLHNEQUNBcEYsS0FBS0QsS0FBS3FCLGlCQUFpQixVQUFVLFNBQUNDLEdBQ3BDLEVBQUtzRCx1QkFBdUIsaUJBQzVCLEVBQUtRLGtCQUFrQjlELEVBQUcsRUFBS2tFLG1CQUFtQixXQUNoRCxFQUFLdEIsUUFDTCxFQUFLdUIsZ0NBdEJiLG1CQTJCRSxXQUNFLDBDQUNBeEYsS0FBS0QsS0FBSzBGLGEsaUJBN0JkLEdBQW1DN0IsRyxzS0NGNUIsSUFBTThCLEVBQWIsV0FDRSxXQUNFL0MsRUFERixFQUdFVSxFQUNBc0MsRUFDQUMsRUFDQUMsR0FDQSxJQUxFdkQsRUFLRixFQUxFQSxLQUFNd0QsRUFLUixFQUxRQSxLQUFNQyxFQUtkLEVBTGNBLE1BQU9WLEVBS3JCLEVBTHFCQSxHQUFJVyxFQUt6QixFQUx5QkEsTyw0RkFLekIsU0FDQWhHLEtBQUtxRixHQUFLQSxFQUNWckYsS0FBSzJDLElBQU1BLEVBQ1gzQyxLQUFLc0MsS0FBT0EsRUFDWnRDLEtBQUs4RixLQUFPQSxFQUNaOUYsS0FBSytGLE1BQVFBLEVBQ2IvRixLQUFLZ0csTUFBUUEsRUFDYmhHLEtBQUtxRCxZQUFjQSxFQUVuQnJELEtBQUtpRyxTQUFXbEUsU0FBU2QsY0FBYzBFLEdBQ3ZDM0YsS0FBSzRGLGdCQUFrQkEsRUFDdkI1RixLQUFLNkYsa0JBQW9CQSxFLFFBbkI3QixPLEVBQUEsRyxFQUFBLHVCQXdCRSxTQUFTeEUsR0FDUCxJQUNNNkUsRUFEZ0I3RSxFQUFFRSxPQUFPMEQsUUFBUSw4QkFDRWhFLGNBQWMsbUNBRW5ESSxFQUFFRSxPQUFPNkMsVUFBVUssU0FBUyxvQ0FDOUJ6RSxLQUFLMkMsSUFBSXdELFdBQVduRyxLQUFLcUYsSUFBSSxTQUFDbkMsR0FDNUI3QixFQUFFRSxPQUFPNkMsVUFBVUksT0FBTyxvQ0FDMUIwQixFQUFtQnZGLFlBQWN1QyxFQUFLNkMsTUFBTUssVUFDM0MsR0FFSHBHLEtBQUsyQyxJQUFJd0QsV0FBV25HLEtBQUtxRixJQUFJLFNBQUNuQyxHQUM1QjdCLEVBQUVFLE9BQU82QyxVQUFVQyxJQUFJLG9DQUN2QjZCLEVBQW1CdkYsWUFBY3VDLEVBQUs2QyxNQUFNSyxZQXBDcEQseUJBeUNFLFNBQVkvRSxHQUNWLElBQU13RCxFQUFPeEQsRUFBRUUsT0FBTzBELFFBQVEsZUFFOUJqRixLQUFLMkMsSUFBSTBELFdBQVdyRyxLQUFLcUYsSUFBSSxXQUMzQlIsRUFBS0wsY0E3Q1gsa0NBaURFLFNBQXFCbkQsR0FBRyxXQUN0QnJCLEtBQUs2RixtQkFBa0IsV0FBUSxFQUFLUyxZQUFZakYsUUFsRHBELHdCQXFERSxTQUFXQSxHQUNUckIsS0FBSzRGLGdCQUFnQnZFLEtBdER6QiwwQkEwREUsV0FDRSxPQUFPckIsS0FBS2lHLFNBQVNNLFFBQVFDLFdBQVUsS0EzRDNDLGdDQThERSxTQUFtQkMsR0FBUyxXQUMxQkEsRUFBUXhGLGNBQWMsOEJBQThCRyxpQkFBaUIsU0FBUyxTQUFDQyxHQUFELE9BQU8sRUFBS3FGLFNBQVNyRixNQUNuR29GLEVBQVF4RixjQUFjLHNCQUFzQkcsaUJBQWlCLFNBQVMsU0FBQ0MsR0FBRCxPQUFPLEVBQUtzRixxQkFBcUJ0RixNQUN2R29GLEVBQVF4RixjQUFjLHNCQUFzQkcsaUJBQWlCLFNBQVMsU0FBQ0MsR0FBRCxPQUFPLEVBQUt1RixXQUFXdkYsUUFqRWpHLHdCQW9FRSxTQUFXb0YsR0FDTHpHLEtBQUtxRCxZQUFZZixPQUFTdEMsS0FBS2dHLFFBQ2pDUyxFQUFReEYsY0FBYyxzQkFBc0I0RixNQUFNQyxRQUFVLFdBdEVsRSwwQkEwRUUsU0FBYUwsR0FBUyxXQUNMekcsS0FBSytGLE1BQU1nQixNQUFLLFNBQUNDLEdBRTlCLE9BRGVBLEVBQUkxRSxPQUFTLEVBQUtlLFlBQVlmLFNBSTdDbUUsRUFBUXhGLGNBQWMsOEJBQThCbUQsVUFBVUMsSUFBSSxzQ0FoRnhFLDZCQW9GRSxXQUNFLElBQU1vQyxFQUFVekcsS0FBS2lILGVBQ2ZDLEVBQVFULEVBQVF4RixjQUFjLHNCQUM5QmtHLEVBQU9WLEVBQVF4RixjQUFjLG1DQVNuQyxPQVJBaUcsRUFBTXBDLElBQU05RSxLQUFLOEYsS0FDakJvQixFQUFNbkMsSUFBTS9FLEtBQUtzQyxLQUNqQjZFLEVBQUt4RyxZQUFjWCxLQUFLK0YsTUFBTUssT0FDOUJLLEVBQVF4RixjQUFjLDhCQUE4Qk4sWUFBY1gsS0FBS3NDLEtBQ3ZFdEMsS0FBS29ILFdBQVdYLEdBQ2hCekcsS0FBS3FILGFBQWFaLEdBRWxCekcsS0FBS3NILG1CQUFtQmIsR0FDakJBLE8saUJBaEdYLEtDS08sU0FBU2MsRUFBV2pGLEVBQU13RCxFQUFNQyxFQUFPVixFQUFJaEMsR0FTaEQsT0FSYSxJQUFJcUMsRUFDZi9DLEVBQ0EsQ0FBRUwsT0FBTXdELE9BQU1DLFFBQU9WLE1BQ3JCaEMsRUFDQSxjQUNBbUUsRUFBZXhELEtBQ2Z5RCxFQUFZekQsTUFFRjBELGtCLDhrQ0NaUCxJQUFNQyxFQUFiLGEsa09BQUEsVSxRQUFBLEcsRUFBQSxFLCtZQUNFLFdBQVlqRixHQUFVLGEsNEZBQUEsVUFDcEIsY0FBTUEsSUFDRDNDLEtBQU8sRUFBSzhELE1BQU01QyxjQUFjLFFBRmpCLEVBRHhCLE8sRUFBQSxHLEVBQUEsZ0NBTUUsV0FBb0IsV0FDbEIsc0RBQ0FqQixLQUFLRCxLQUFLcUIsaUJBQWlCLFVBQVUsU0FBQ0MsR0FDcENBLEVBQUV1RyxpQkFDRixFQUFLekMsb0JBQ0wsRUFBS2xCLGFBWFgsa0JBZUUsU0FBSzRELEdBQ0gseUNBQ0E3SCxLQUFLbUYsa0JBQW9CMEMsTyxpQkFqQjdCLEdBQXFDakUsRyxzS0NGOUIsSUFBTWtFLEVBQWIsV0FDRSxjQUFrQyxJQUFwQkMsRUFBb0IsRUFBcEJBLFFBQVNDLEVBQVcsRUFBWEEsUyw0RkFBVyxTQUNoQ2hJLEtBQUsrSCxRQUFVQSxFQUNmL0gsS0FBS2dJLFFBQVVBLEUsUUFIbkIsTyxFQUFBLEcsRUFBQSw4QkFNRSxTQUFnQmpGLEdBQ2RrRixNQUFNakksS0FBSytILFFBQVUsUUFBUyxDQUFFQyxRQUFTaEksS0FBS2dJLFVBQzNDRSxNQUFLLFNBQUNDLEdBQ0wsSUFBSUEsRUFBSUMsR0FHTixPQUFPQyxRQUFRQyxPQUFSLGtCQUEwQkgsRUFBSUksU0FGckNKLEVBQUlLLE9BQU9OLE1BQUssU0FBQWhGLEdBQUksT0FBSUgsRUFBVUcsU0FLckN1RixPQUFNLFNBQUNDLEdBQ04sT0FBT0wsUUFBUUMsT0FBUixrQkFBMEJJLFNBaEJ6QyxnQ0FvQkUsU0FBbUIzRixHQUNqQmtGLE1BQU1qSSxLQUFLK0gsUUFBVSxZQUFhLENBQUVDLFFBQVNoSSxLQUFLZ0ksVUFDL0NFLE1BQUssU0FBQ0MsR0FDTCxJQUFJQSxFQUFJQyxHQUdOLE9BQU9DLFFBQVFDLE9BQVIsa0JBQTBCSCxFQUFJSSxTQUZyQ0osRUFBSUssT0FBT04sTUFBSyxTQUFBaEYsR0FBSSxPQUFJSCxFQUFVRyxTQUtyQ3VGLE9BQU0sU0FBQ0MsR0FDTixPQUFPTCxRQUFRQyxPQUFSLGtCQUEwQkksU0E5QnpDLCtCQWtDRSxTQUFrQkMsRUFBYTVGLEdBQzdCa0YsTUFDRWpJLEtBQUsrSCxRQUFVLFlBQ2YsQ0FDRWEsT0FBUSxRQUNSWixRQUFTaEksS0FBS2dJLFFBQ2RhLEtBQU1DLEtBQUtDLFVBQVVKLEtBRXZCVCxNQUFLLFNBQUNDLEdBQ04sSUFBSUEsRUFBSUMsR0FHTixPQUFPQyxRQUFRQyxPQUFSLGtCQUEwQkgsRUFBSUksU0FGckN4RixPQUlEMEYsT0FBTSxTQUFDQyxHQUNSLE9BQU9MLFFBQVFDLE9BQVIsa0JBQTBCSSxTQWpEdkMsOEJBcURFLFNBQWlCTSxFQUFXakcsR0FDMUJrRixNQUNFakksS0FBSytILFFBQVUsa0JBQ2YsQ0FDRWEsT0FBUSxRQUNSWixRQUFTaEksS0FBS2dJLFFBQ2RhLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRUUsT0FBUUQsTUFFakNkLE1BQUssU0FBQ0MsR0FDTixJQUFJQSxFQUFJQyxHQUdOLE9BQU9DLFFBQVFDLE9BQVIsa0JBQTBCSCxFQUFJSSxTQUZyQ3hGLEVBQVVpRyxNQUlYUCxPQUFNLFNBQUNDLEdBQ1IsT0FBT0wsUUFBUUMsT0FBUixrQkFBMEJJLFNBcEV2Qyx3QkF5RUUsU0FBV1EsRUFBVW5HLEdBQ25Ca0YsTUFDRWpJLEtBQUsrSCxRQUFVLFFBQ2YsQ0FDRWEsT0FBUSxPQUNSWixRQUFTaEksS0FBS2dJLFFBQ2RhLEtBQU1DLEtBQUtDLFVBQVVHLEtBRXZCaEIsTUFBSyxTQUFDQyxHQUNOLElBQUlBLEVBQUlDLEdBS04sT0FBT0MsUUFBUUMsT0FBUixrQkFBMEJILEVBQUlJLFNBSnJDSixFQUFJSyxPQUFPTixNQUFLLFNBQUFoRixHQUNkSCxFQUFVRyxTQUtidUYsT0FBTSxTQUFDQyxHQUNSLE9BQU9MLFFBQVFDLE9BQVIsa0JBQTBCSSxTQTFGdkMsd0JBOEZFLFNBQVdTLEVBQVFwRyxHQUNqQmtGLE1BQ0VqSSxLQUFLK0gsUUFBVSxTQUFXb0IsRUFDMUIsQ0FDRVAsT0FBUSxTQUNSWixRQUFTaEksS0FBS2dJLFVBRWhCRSxNQUFLLFNBQUNDLEdBQ04sSUFBSUEsRUFBSUMsR0FLTixPQUFPQyxRQUFRQyxPQUFSLGtCQUEwQkgsRUFBSUksU0FKckNKLEVBQUlLLE9BQU9OLE1BQUssU0FBQWhGLEdBQ2RILEVBQVVHLFNBS2J1RixPQUFNLFNBQUNDLEdBQ1IsT0FBT0wsUUFBUUMsT0FBUixrQkFBMEJJLFNBOUd2Qyx3QkFrSEUsU0FBV1MsRUFBUXBHLEVBQVdxRyxHQUM1Qm5CLE1BQ0VqSSxLQUFLK0gsUUFBVSxlQUFpQm9CLEVBQ2hDLENBQ0VQLE9BQVFRLEVBQVcsU0FBVyxNQUM5QnBCLFFBQVNoSSxLQUFLZ0ksVUFFaEJFLE1BQUssU0FBQ0MsR0FDTixJQUFJQSxFQUFJQyxHQUtOLE9BQU9DLFFBQVFDLE9BQVIsa0JBQTBCSCxFQUFJSSxTQUpyQ0osRUFBSUssT0FBT04sTUFBSyxTQUFBaEYsR0FDZEgsRUFBVUcsU0FLYnVGLE9BQU0sU0FBQ0MsR0FDUixPQUFPTCxRQUFRQyxPQUFSLGtCQUEwQkksWSxpQkFsSXZDLEtDU2E1SSxFQUFhLENBQ3hCdUosYUFBYyxnQkFDZHpILHFCQUFzQixpQkFDdEJELHVCQUF3Qix5QkFDeEJULGNBQWUsZUFDZkMsbUJBQW9CLG9DQUNwQmEsdUJBQXdCLDRDQUN4QkUsYUFBYyx3QkFJSG9ILEVBREd2SCxTQUFTZCxjQUFjLFlBQ0ZBLGNBQWMsb0JBQ3RDc0ksRUFBbUJ4SCxTQUFTZCxjQUFjLHdCQUUxQ3VJLEdBRGN6SCxTQUFTZCxjQUFjLHNCQUNyQmMsU0FBU2QsY0FBY25CLEVBQVdvQyxlQUNsRHVILEVBQWlCMUgsU0FBU2QsY0FBYywyQkFDeEN5SSxFQUFnQjNILFNBQVNkLGNBQWMsa0JBQ3ZDMEksRUFBUW5JLE1BQU1DLEtBQUtNLFNBQVNMLGlCQUFpQjVCLEVBQVd1SixlQUV4RHhHLEVBQVcsSUFBSVosRUFBUyxDQUNuQ0MsYUFBY3BDLEVBQVdvQyxhQUN6QkMsY0FBZSw0QkFHSnFGLEVBQWlCLElBQUk1QyxFQUFlLDJCQUNwQ2dGLEVBQW9CLElBQUkxRSxFQUFjLDBCQzlCNUMsU0FBNkIyRSxFQUFLekUsRUFBUXJDLEdBQy9DOEcsRUFBSWpDLGlCQUVKLElBQVF0RixFQUFjOEMsRUFBZDlDLEtBQU1FLEVBQVE0QyxFQUFSNUMsSUFDZEssY0FBcUIsQ0FBRVAsT0FBTUUsUUFDN0JHLG9CQUFzQixDQUFFTCxPQUFNQyxNQUFPQyxHQUFPTyxLRHlCb0RGLEdBQ3JGaUgsRUFBd0IsSUFBSTVFLEVBQWMsOEJDdkJoRCxTQUE4QjdELEVBQUcrRCxFQUFRckMsR0FDOUMxQixFQUFFdUcsaUJBQ0YsSUFBUVYsRUFBZ0I5QixFQUFoQjhCLE1BQU9wQixFQUFTVixFQUFUVSxLQUVmbkQsZ0JBQ0UsQ0FBRUwsS0FBTTRFLEVBQU9wQixTQUNmLFlBQWlDLElBQTlCeEQsRUFBOEIsRUFBOUJBLEtBQU0wRCxFQUF3QixFQUF4QkEsTUFBT0QsRUFBaUIsRUFBakJBLE1BQU9nRSxFQUFVLEVBQVZBLElBQ3JCaEgsSUFDQSxJQUNNaUgsRUFEcUJuSCxFQUFTUyxjQUE1QmhCLE9BQ3FCMEQsRUFBTTFELEtBQ25DMkgsVUFBZ0IxQyxFQUFXakYsRUFBTXdELEVBQU1DLEVBQU9nRSxFQUFLQyxJQUNuRGxJLEVBQXFCaEMsUURZZ0YrQyxHQUM5RjRFLEVBQWMsSUFBSUUsRUFBZ0IsNkJBRWxDdUMsR0FEV25JLFNBQVNkLGNBQWMsd0JBQ2hCLElBQUlpRSxFQUFjLDRCQ1YxQyxTQUEwQjdELEVBQUcrRCxFQUFRckMsR0FDMUMxQixFQUFFdUcsaUJBRUZqRixtQkFBcUJ5QyxFQUFPLGdCQUFnQixTQUFDNEQsR0FDM0NqRyxJQUNBMkcsTUFBb0JWLFNET1hyRyxFQUFNLElBQUltRixFQUFJLENBQ3pCQyxRQUFTLCtDQUNUQyxRQUFTLENBQ1BtQyxjQUFlLHVDQUNmLGVBQWdCLG1CQUNoQiwrQkFBZ0MsdUJBT3ZCRixFQUFVLElBQUl4SCxFQUFRLENBQ2pDRSxNQUNBQyxTQUxlLFNBQUMsRUFBNEJTLEdBQTdCLE9BQTZDa0UsRUFBN0MsRUFBR2pGLEtBQUgsRUFBU3dELEtBQVQsRUFBZUMsTUFBZixFQUFzQmdFLElBQTBEMUcsSUFNL0ZSLFlBQ0MsYUVuQ0gsU0FBU3VILEVBQWV2SCxHQUN0QixJQUFNd0gsRUFBWXRJLFNBQVNkLGNBQWMsU0FDbkNxSixFQUFXdkksU0FBU2QsY0FBYyxRQUN4QyxFQUF3QjRCLEVBQVNTLGNBQXpCaEIsRUFBUixFQUFRQSxLQUFNQyxFQUFkLEVBQWNBLE1BRWQ4SCxFQUFVL0UsTUFBUWhELEVBQ2xCZ0ksRUFBU2hGLE1BQVEvQyxFQUduQm9ILFdBQWMsU0FBVTVKLEdBQ0EsSUFBSUYsRUFBY0MsRUFBWUMsR0FDdEN3Syx1QkFHaEIvQyxFQUFlZ0Qsb0JBQ2ZaLEVBQWtCWSxvQkFDbEJWLEVBQXNCVSxvQkFDdEIvQyxFQUFZK0Msb0JBQ1pOLEVBQWdCTSxvQkFFaEJsQixFQUFjbEksaUJBQWlCLFNBQVMsV0FDdEN3SSxTQUNBUSxFQUFldkgsTUFJakI2RyxFQUFjdEksaUJBQWlCLFNBQVMsV0FDdEM4SSxTQUNBRSxFQUFldkgsTUFJakIwRyxFQUFpQm5JLGlCQUFpQixRQUFTMEksRUFBc0I5RixNQUVqRXJCLEVBQUk4SCxvQkFBbUIsU0FBQ3ZILEdBQ3RCc0csY0FBNEJ0RyxFQUFLWixLQUNqQ21ILGNBQTZCdkcsRUFBS1gsTUFDbENtSCxNQUFvQnhHLEVBQUsrRixPQUV6QmdCLGtCIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihhbGxDbGFzc2VzLCBmb3JtKSB7XG4gICAgdGhpcy5hbGxDbGFzc2VzID0gYWxsQ2xhc3NlcztcbiAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICB9XG5cbiAgX3ZhbGlkYXRlSW5wdXQoaW5wdXQsIGVycm9yRWxlbWVudCwgZm9ybUJ1dHRvbikge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBlcnJvckVsZW1lbnQpO1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbihmb3JtQnV0dG9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZXJyb3JFbGVtZW50KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZm9ybS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgIGZvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihlcnJvckVsZW1lbnQpIHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoZm9ybUJ1dHRvbiwgZm9ybUlucHV0cykge1xuICAgIGZvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dFNlbGVjdG9yKVxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXQucXVlcnlTZWxlY3Rvcih0aGlzLmFsbENsYXNzZXMuaW5wdXRFcnJvclNlbGVjdG9yKTtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXQoZS50YXJnZXQsIGVycm9yRWxlbWVudCwgZm9ybUJ1dHRvbik7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbnMoKSB7XG4gICAgY29uc3QgZm9ybUlucHV0cyA9IEFycmF5LmZyb20odGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5hbGxDbGFzc2VzLmlucHV0Q29udGFpbmVyU2VsZWN0b3IpKTtcbiAgICBjb25zdCBmb3JtQnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5hbGxDbGFzc2VzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoZm9ybUJ1dHRvbiwgZm9ybUlucHV0cyk7XG4gICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbnModGhpcy5hbGxDbGFzc2VzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoYWxsQ2xhc3Nlcykge1xuICBjb25zdCBkaXNhYmxlZEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWxsQ2xhc3Nlcy5kaXNhYmxlZEJ1dHRvblNlbGVjdG9yKSk7XG4gIGRpc2FibGVkQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Rm9ybXNFcnJvcnMoZm9ybXMsIGFsbENsYXNzZXMpIHtcbiAgZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYWxsQ2xhc3Nlcy5pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgIGVycm9yRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiKTtcbiAgfSlcbn1cblxuXG5cblxuXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5wcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5wcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMucHJvZmlsZVRpdGxlLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMucHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMucHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50ID0gam9iO1xuICB9XG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGFwaSwgcmVuZGVyZXIsIHVzZXJJbmZvIH0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy51c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHRoaXMub25TdWNjZXNzID0gdGhpcy5vblN1Y2Nlc3MuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGluaXRDYXJkcygpIHtcbiAgICB0aGlzLmFwaS5nZXRJbml0aWFsQ2FyZHModGhpcy5vblN1Y2Nlc3MpO1xuICB9XG5cbiAgb25TdWNjZXNzKGRhdGEpIHtcbiAgICB0aGlzLml0ZW1zID0gZGF0YTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdGhpcy51c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgcmVuZGVyZWRJdGVtID0gdGhpcy5yZW5kZXJlcihpdGVtLCBjdXJyZW50VXNlcik7XG4gICAgICB0aGlzLmFkZEl0ZW0ocmVuZGVyZWRJdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImNvbnN0IEVTQ0FQRV9LRVlDT0RFID0gMjc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuXG4gICAgaWYgKHRoaXMuc3VibWl0QnV0dG9uKSB7XG4gICAgICB0aGlzLmRlZmF1bHRTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cEVzYyk7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNsb3NlSWNvbiA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1pY29uJyk7XG4gICAgY2xvc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XG4gICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlU3VibWl0QnV0dG9uVGV4dCh0ZXh0KSB7XG4gICAgaWYgKHRoaXMuc3VibWl0QnV0dG9uKSB7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRTdWJtaXRCdXR0b25UZXh0KCkge1xuICAgIHRoaXMudXBkYXRlU3VibWl0QnV0dG9uVGV4dCh0aGlzLmRlZmF1bHRTdWJtaXRCdXR0b25UZXh0KVxuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3BlbihlKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIGNvbnN0IGNhcmQgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIGNhcmQuc3JjID0gZS50YXJnZXQuc3JjO1xuICAgIGNhcmQuYWx0ID0gZS50YXJnZXQuYWx0O1xuICAgIGNvbnN0IHBhcmVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5tZXN0by1jYXJkJyk7XG4gICAgY29uc3Qgc3VidGl0bGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLW5hbWUnKTtcbiAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGV4dCcpLnRleHRDb250ZW50ID0gc3VidGl0bGUudGV4dENvbnRlbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBzdWJtaXRGb3JtSGFuZGxlcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyID0gc3VibWl0Rm9ybUhhbmRsZXI7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG5cbiAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdmFsdWVzW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICAgICAgdGhpcy5zdWJtaXRGb3JtSGFuZGxlcihlLCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5yZXNldFN1Ym1pdEJ1dHRvblRleHQoKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwaSxcbiAgICB7IG5hbWUsIGxpbmssIGxpa2VzLCBpZCwgb3duZXIgfSxcbiAgICBjdXJyZW50VXNlcixcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuYXBpID0gYXBpO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5saW5rID0gbGluaztcbiAgICB0aGlzLmxpa2VzID0gbGlrZXM7XG4gICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgIHRoaXMuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcblxuICAgIHRoaXMudGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgfVxuXG4gIC8qKiDQn9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCAqL1xuXG4gIF9hZGRMaWtlKGUpIHtcbiAgICBjb25zdCBsaWtlQ29udGFpbmVyID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWxpa2UnKTtcbiAgICBjb25zdCBsaWtlQ291bnRDb250YWluZXIgPSBsaWtlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uLWxpa2UnKTtcblxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21lc3RvLWNhcmRfX3N1YnRpdGxlLWljb25fYWN0aXZlJykpIHtcbiAgICAgIHRoaXMuYXBpLnVwZGF0ZUxpa2UodGhpcy5pZCwgKGRhdGEpID0+IHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKTtcbiAgICAgICAgbGlrZUNvdW50Q29udGFpbmVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcGkudXBkYXRlTGlrZSh0aGlzLmlkLCAoZGF0YSkgPT4ge1xuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpO1xuICAgICAgICBsaWtlQ291bnRDb250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIF9kZWxldGVDYXJkKGUpIHtcbiAgICBjb25zdCBjYXJkID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lc3RvLWNhcmQnKTtcblxuICAgIHRoaXMuYXBpLmRlbGV0ZUNhcmQodGhpcy5pZCwgKCkgPT4ge1xuICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9vbkRlbGV0ZUJ1dHRvbkNsaWNrKGUpIHtcbiAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrKCgpID0+IHsgdGhpcy5fZGVsZXRlQ2FyZChlKTsgfSk7XG4gIH1cblxuICBfc2hvd1Bob3RvKGUpIHtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayhlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMobmV3Q2FyZCkge1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9hZGRMaWtlKGUpKTtcbiAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX190cmFzaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX29uRGVsZXRlQnV0dG9uQ2xpY2soZSkpO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3Bob3RvJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5fc2hvd1Bob3RvKGUpKTtcbiAgfVxuXG4gIF9zaG93VHJhc2gobmV3Q2FyZCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyLm5hbWUgPT09IHRoaXMub3duZXIpIHtcbiAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgfVxuXG4gIF9zaG93SXNMaWtlZChuZXdDYXJkKSB7XG4gICAgY29uc3QgbXlMaWtlID0gdGhpcy5saWtlcy5maW5kKChlbHQpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGVsdC5uYW1lID09PSB0aGlzLmN1cnJlbnRVc2VyLm5hbWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICAgIGlmIChteUxpa2UpIHtcbiAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24nKS5jbGFzc0xpc3QuYWRkKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZU1lc3RvQ2FyZCgpIHtcbiAgICBjb25zdCBuZXdDYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICBjb25zdCBtZXN0byA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3Bob3RvJyk7XG4gICAgY29uc3QgbGlrZSA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24tbGlrZScpO1xuICAgIG1lc3RvLnNyYyA9IHRoaXMubGluaztcbiAgICBtZXN0by5hbHQgPSB0aGlzLm5hbWU7XG4gICAgbGlrZS50ZXh0Q29udGVudCA9IHRoaXMubGlrZXMubGVuZ3RoO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLW5hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9zaG93VHJhc2gobmV3Q2FyZCk7XG4gICAgdGhpcy5fc2hvd0lzTGlrZWQobmV3Q2FyZCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhuZXdDYXJkKTtcbiAgICByZXR1cm4gbmV3Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL0NhcmRzLmpzJztcbmltcG9ydCB7IHBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgcG9wdXBTdWJtaXQgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBhcGkgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKG5hbWUsIGxpbmssIGxpa2VzLCBpZCwgY3VycmVudFVzZXIpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGFwaSxcbiAgICB7IG5hbWUsIGxpbmssIGxpa2VzLCBpZCB9LFxuICAgIGN1cnJlbnRVc2VyLFxuICAgICcjbWVzdG8tY2FyZCcsXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbixcbiAgICBwb3B1cFN1Ym1pdC5vcGVuLFxuICApO1xuICByZXR1cm4gY2FyZC5jcmVhdGVNZXN0b0NhcmQoKTtcbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdWJtaXRGb3JtSGFuZGxlcigpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG4gIH1cblxuICBvcGVuKG9uU3VibWl0KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIgPSBvblN1Ym1pdDtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKG9uU3VjY2Vzcykge1xuICAgIGZldGNoKHRoaXMuYmFzZVVybCArICdjYXJkcycsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXMuanNvbigpLnRoZW4oZGF0YSA9PiBvblN1Y2Nlc3MoZGF0YSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldEluZm9BYm91dFBlb3BsZShvblN1Y2Nlc3MpIHtcbiAgICBmZXRjaCh0aGlzLmJhc2VVcmwgKyAndXNlcnMvbWUvJywgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJlcy5qc29uKCkudGhlbihkYXRhID0+IG9uU3VjY2VzcyhkYXRhKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlRWRpdFByb2ZpbGUocHJvZmlsZURhdGEsIG9uU3VjY2Vzcykge1xuICAgIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ3VzZXJzL21lLycsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9maWxlRGF0YSksXG4gICAgICB9LFxuICAgICkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVFZGl0QXZhdGFyKGF2YXRhclVybCwgb25TdWNjZXNzKSB7XG4gICAgZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAndXNlcnMvbWUvYXZhdGFyJyxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXJVcmwgfSksXG4gICAgICB9LFxuICAgICkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIG9uU3VjY2VzcyhhdmF0YXJVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgfSk7XG4gIH1cblxuXG4gIGFkZE5ld9ChYXJkKGNhcmREYXRhLCBvblN1Y2Nlc3MpIHtcbiAgICBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICdjYXJkcycsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKSxcbiAgICAgIH0sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmVzLmpzb24oKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIG9uU3VjY2VzcyhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkLCBvblN1Y2Nlc3MpIHtcbiAgICBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICdjYXJkcy8nICsgY2FyZElkLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICB9LFxuICAgICkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJlcy5qc29uKCkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICBvblN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVMaWtlKGNhcmRJZCwgb25TdWNjZXNzLCBpc0RlbGV0ZSkge1xuICAgIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogaXNEZWxldGUgPyAnREVMRVRFJyA6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICB9LFxuICAgICkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJlcy5qc29uKCkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICBvblN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vVXNlckluZm8uanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL1NlY3Rpb24uanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgeyBoYW5kbGVQcm9maWxlU3VibWl0LCBoYW5kbGVBZGRNZXN0b1N1Ym1pdCwgaGFuZGxlRWRpdEF2YXRhciB9IGZyb20gJy4vaGFuZGxlcnMuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZCB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhTdWJtaXQgfSBmcm9tICcuLi9Qb3B1cFdpdGhTdWJtaXQuanMnO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vQXBpLmpzJztcblxuZXhwb3J0IGNvbnN0IGFsbENsYXNzZXMgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5wdXRDb250YWluZXJTZWxlY3RvcjogJy5wb3B1cF9fbmFtZS1jb250YWluZXInLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19uYW1lJyxcbiAgaW5wdXRFcnJvclNlbGVjdG9yOiAnLnBvcHVwX19uYW1lLnBvcHVwX19uYW1lX3R5cGVfZXJyJyxcbiAgZGlzYWJsZWRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fY29udGFpbmVyX25ldy1jYXJkIC5wb3B1cF9fYnV0dG9uJyxcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tdGl0bGUnLFxufTtcblxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XG5leHBvcnQgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fdHJhc2gnKTtcbmV4cG9ydCBjb25zdCBuYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhbGxDbGFzc2VzLm5hbWVTZWxlY3Rvcik7XG5leHBvcnQgY29uc3QgYWJvdXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mby1zdWJ0aXRsZScpO1xuZXhwb3J0IGNvbnN0IGZvdG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZm90bycpO1xuZXhwb3J0IGNvbnN0IGZvcm1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFsbENsYXNzZXMuZm9ybVNlbGVjdG9yKSk7XG5cbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogYWxsQ2xhc3Nlcy5uYW1lU2VsZWN0b3IsXG4gIGFib3V0U2VsZWN0b3I6ICcucHJvZmlsZV9faW5mby1zdWJ0aXRsZScsXG59KTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAucG9wdXBfdHlwZV9pbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aFVzZXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC5wb3B1cF90eXBlX2VkaXQnLCBoYW5kbGVQcm9maWxlU3VibWl0LCB1c2VySW5mbyk7XG5leHBvcnQgY29uc3QgcG9wdXBXaXRoQWRkTWVzdG9Gb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC5wb3B1cF90eXBlX25ldy1jYXJkJywgaGFuZGxlQWRkTWVzdG9TdWJtaXQsIHVzZXJJbmZvKTtcbmV4cG9ydCBjb25zdCBwb3B1cFN1Ym1pdCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJy5wb3B1cC5wb3B1cF90eXBlX2NvbmZpcm0nKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9uZXctY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cC5wb3B1cF90eXBlX3VwZGF0ZVwiLCBoYW5kbGVFZGl0QXZhdGFyKTtcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNi8nLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzgyMjU2ZjI1LTM2NWMtNDZhYy1hYTFmLWE4NDYxMjlmNmQ3NycsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBHRVQsIERFTEVURScsXG4gIH1cbn0pO1xuXG5jb25zdCByZW5kZXJlciA9ICh7IG5hbWUsIGxpbmssIGxpa2VzLCBfaWQgfSwgY3VycmVudFVzZXIpID0+IGNyZWF0ZUNhcmQobmFtZSwgbGluaywgbGlrZXMsIF9pZCwgY3VycmVudFVzZXIpO1xuXG5cbmV4cG9ydCBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICBhcGksXG4gIHJlbmRlcmVyLFxuICB1c2VySW5mbyxcbn0sICcuZWxlbWVudHMnKTtcbiIsImltcG9ydCB7IGRpc2FibGVTdWJtaXRCdXR0b25zIH0gZnJvbSAnLi4vRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkIH0gZnJvbSAnLi9oZWxwZXJzLmpzJztcbmltcG9ydCB7IHVzZXJJbmZvLCBzZWN0aW9uLCBhbGxDbGFzc2VzLCBhcGksIGZvdG9Db250YWluZXIgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9maWxlU3VibWl0KGV2dCwgdmFsdWVzLCBvblN1Y2Nlc3MpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHZhbHVlcztcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSk7XG4gIGFwaS51cGRhdGVFZGl0UHJvZmlsZSh7IG5hbWUsIGFib3V0OiBqb2IgfSwgb25TdWNjZXNzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFkZE1lc3RvU3VibWl0KGUsIHZhbHVlcywgb25TdWNjZXNzKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgeyBtZXN0bywgbGluayB9ID0gdmFsdWVzO1xuXG4gIGFwaS5hZGROZXfQoWFyZChcbiAgICB7IG5hbWU6IG1lc3RvLCBsaW5rIH0sXG4gICAgKHsgbmFtZSwgb3duZXIsIGxpa2VzLCBfaWQgfSkgPT4ge1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgICBjb25zdCB7IG5hbWU6IHVzZXJOYW1lIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgICAgY29uc3QgaXNPd25lciA9IHVzZXJOYW1lID09PSBvd25lci5uYW1lO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmFtZSwgbGluaywgbGlrZXMsIF9pZCwgaXNPd25lcikpO1xuICAgICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoYWxsQ2xhc3Nlcyk7XG4gICAgfVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRWRpdEF2YXRhcihlLCB2YWx1ZXMsIG9uU3VjY2Vzcykge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgYXBpLnVwZGF0ZUVkaXRBdmF0YXIodmFsdWVzWydsaW5rLWF2YXRhciddLCAoYXZhdGFyVXJsKSA9PiB7XG4gICAgb25TdWNjZXNzKCk7XG4gICAgZm90b0NvbnRhaW5lci5zcmMgPSBhdmF0YXJVcmw7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQge1xuICBhbGxDbGFzc2VzLFxuICBmb3JtcyxcbiAgcG9wdXBXaXRoSW1hZ2UsXG4gIHBvcHVwV2l0aFVzZXJGb3JtLFxuICBwb3B1cFdpdGhBZGRNZXN0b0Zvcm0sXG4gIHVzZXJJbmZvLFxuICBwcm9maWxlQnV0dG9uLFxuICBwcm9maWxlQnV0dG9uQWRkLFxuICBzZWN0aW9uLFxuICBhcGksXG4gIG5hbWVDb250YWluZXIsXG4gIGFib3V0Q29udGFpbmVyLFxuICBmb3RvQ29udGFpbmVyLFxuICBwb3B1cFN1Ym1pdCxcbiAgcG9wdXBFZGl0QXZhdGFyXG59IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmZ1bmN0aW9uIHNldElucHV0VmFsdWVzKHVzZXJJbmZvKSB7XG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJyk7XG4gIGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pvYicpO1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gYWJvdXQ7XG59XG5cbmZvcm1zLmZvckVhY2goZnVuY3Rpb24gKGZvcm0pIHtcbiAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGFsbENsYXNzZXMsIGZvcm0pO1xuICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb25zKCk7XG59KTtcblxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aFVzZXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhBZGRNZXN0b0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwU3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBXaXRoVXNlckZvcm0ub3BlbigpO1xuICBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG5cbn0pO1xuXG5mb3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEVkaXRBdmF0YXIub3BlbigpO1xuICBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG59KTtcblxuXG5wcm9maWxlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcG9wdXBXaXRoQWRkTWVzdG9Gb3JtLm9wZW4pXG5cbmFwaS5nZXRJbmZvQWJvdXRQZW9wbGUoKGRhdGEpID0+IHtcbiAgbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgYWJvdXRDb250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICBmb3RvQ29udGFpbmVyLnNyYyA9IGRhdGEuYXZhdGFyO1xuXG4gIHNlY3Rpb24uaW5pdENhcmRzKCk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=