(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.d({},{hi:()=>G,kJ:()=>z,lH:()=>M,qi:()=>Y,eY:()=>F});var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.allClasses=t,this.form=document.querySelector("".concat(n," form")),this.submitButton=this.form.querySelector(t.submitButtonSelector),this.inputs=Array.from(this.form.querySelectorAll(this.allClasses.inputContainerSelector)),this.enableValidations=this.enableValidations.bind(this)}var n,o;return n=e,(o=[{key:"_validateInput",value:function(e,t){e.validity.valid?this._hideInputError(t):this._showInputError(e,t),this.toggleSubmitButtonState()}},{key:"_showInputError",value:function(e,t){t.textContent=e.validationMessage}},{key:"_disableButton",value:function(e){e.disabled=!0}},{key:"_hideInputError",value:function(e){e.textContent=""}},{key:"_addValidationsToInputs",value:function(){var e=this;this.inputs.forEach((function(t){var n=t.querySelector(e.allClasses.inputSelector),o=t.querySelector(e.allClasses.inputErrorSelector);n.addEventListener("input",(function(t){e._validateInput(t.target,o)}))}))}},{key:"clearErrors",value:function(){var e=this;this.inputs.forEach((function(t){return e._hideInputError(t.querySelector(e.allClasses.inputErrorSelector))}))}},{key:"toggleSubmitButtonState",value:function(){this.form.checkValidity()?this.submitButton.disabled=!1:this.submitButton.disabled=!0}},{key:"enableValidations",value:function(){this._addValidationsToInputs(),this.toggleSubmitButtonState()}}])&&t(n.prototype,o),e}();function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.validator=n,this.submitButton=this.popup.querySelector('button[type="submit"]'),this.submitButton&&(this.defaultSubmitButtonText=this.submitButton.textContent),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){27===e.keyCode&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this.popup.classList.add("popup_opened"),this.validator&&(this.validator.clearErrors(),this.validator.toggleSubmitButtonState())}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this.popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-icon").addEventListener("click",this.close),this.popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()})),this.validator&&this.validator.enableValidations()}},{key:"updateSubmitButtonText",value:function(e){this.submitButton&&(this.submitButton.textContent=e)}},{key:"resetSubmitButtonText",value:function(){this.updateSubmitButtonText(this.defaultSubmitButtonText)}}])&&o(t.prototype,n),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,o,r,i=(o=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(r){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function p(){return u(this,p),i.apply(this,arguments)}return t=p,(n=[{key:"open",value:function(e){s(f(p.prototype),"open",this).call(this);var t=this.popup.querySelector("img");t.src=e.target.src,t.alt=e.target.alt;var n=e.target.closest(".mesto-card").querySelector(".mesto-card__subtitle-name");this.popup.querySelector(".popup__text").textContent=n.textContent}}])&&a(t.prototype,n),p}(r);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(o);if(r){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(o=i.call(this,e,n)).submitFormHandler=t,o.form=o.popup.querySelector("form"),o}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this.form.querySelectorAll("input").forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;y(m(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){e.updateSubmitButtonText("Сохранение..."),e.submitFormHandler(t,e._getInputValues(),(function(){e.close(),e.resetSubmitButtonText()}))}))}},{key:"close",value:function(){y(m(u.prototype),"close",this).call(this),this.form.reset()}}])&&d(t.prototype,n),u}(r);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(r){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).form=t.popup.querySelector("form"),t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;g(C(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitFormHandler(),e.close()}))}},{key:"open",value:function(e){g(C(u.prototype),"open",this).call(this),this.submitFormHandler=e}}])&&S(t.prototype,n),u}(r);function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(t){var n=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=o}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch(this.baseUrl+"cards/",{headers:this.headers}).then(this._checkResponse)}},{key:"getInfoAboutPeople",value:function(){return fetch(this.baseUrl+"users/me/",{headers:this.headers}).then(this._checkResponse)}},{key:"updateEditProfile",value:function(e){return fetch(this.baseUrl+"users/me/",{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"updateEditAvatar",value:function(e){return fetch(this.baseUrl+"users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"addNewСard",value:function(e){return fetch(this.baseUrl+"cards",{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch(this.baseUrl+"cards/"+e,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}},{key:"updateLike",value:function(e,t){return fetch(this.baseUrl+"cards/likes/"+e,{method:t?"DELETE":"PUT",headers:this.headers}).then(this._checkResponse)}}])&&P(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=function(){function e(t){var n=t.nameSelector,o=t.aboutSelector,r=t.fotoSelector,i=t.handleClick,u=t.fotoInputSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileTitle=document.querySelector(n),this.profileSubtitle=document.querySelector(o),this.fotoContainer=document.querySelector(r),this.fotoInput=document.querySelector(u),this.handleClick=i}var t,n;return t=e,(n=[{key:"_updateUserInfoOnPage",value:function(){this.profileTitle.textContent=this.userInfo.name,this.profileSubtitle.textContent=this.userInfo.about,this.fotoInput.value=this.userInfo.avatar,this.fotoContainer.src=this.userInfo.avatar}},{key:"setUserInfo",value:function(e){this.userInfo=e,this._updateUserInfoOnPage()}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setEventListeners",value:function(){var e=this;this.fotoContainer.addEventListener("click",(function(t){e._updateUserInfoOnPage(),e.handleClick(t)}))}},{key:"updateNameAndJob",value:function(e){var t=e.name,n=e.job;this.userInfo.name=t,this.userInfo.about=n,this._updateUserInfoOnPage()}},{key:"updateAvatarUrl",value:function(e){this.userInfo.avatar=e,this._updateUserInfoOnPage()}}])&&L(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var T=function(){function e(t,n){var o=t.api,r=t.renderer,i=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=o,this.userInfo=i,this.renderer=r,this.container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"initCards",value:function(){var e=this;return this.api.getInitialCards().then((function(t){e.items=t,e.render()}))}},{key:"render",value:function(){var e=this,t=this.userInfo.getUserInfo();this.items.forEach((function(n){var o=e.renderer(n,t);e.addItem(o)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&q(t.prototype,n),e}(),R={formSelector:".popup__input",submitButtonSelector:".popup__button",inputContainerSelector:".popup__name-container",inputSelector:".popup__name",inputErrorSelector:".popup__name.popup__name_type_err",disabledButtonSelector:".popup__container_new-card .popup__button",nameSelector:".profile__info-title",fotoContainer:".profile__foto",aboutSelector:".profile__info-subtitle"},B=document.querySelector(".profile").querySelector(".profile__button"),U=document.querySelector(".profile__button-add"),x=(document.querySelector(".mesto-card__trash"),document.querySelector(R.nameSelector),document.querySelector(".profile__info-subtitle"),document.querySelector("#name")),A=document.querySelector("#job");function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var V=function(){function e(t,n,o,r,i,u){var a=n.name,s=n.link,c=n.likes,l=n.id,f=n.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=l,this.api=t,this.name=a,this.link=s,this.likes=c,this.owner=f,this.currentUser=o,this.template=document.querySelector(r),this.handleCardClick=i,this.handleDeleteClick=u}var t,n;return t=e,(n=[{key:"_addLike",value:function(e){var t=e.target.closest(".mesto-card__subtitle-like").querySelector(".mesto-card__subtitle-icon-like");e.target.classList.contains("mesto-card__subtitle-icon_active")?this.api.updateLike(this.id,!0).then((function(n){e.target.classList.remove("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length})).catch((function(e){console.error("Не удалось убрать лайк",e)})):this.api.updateLike(this.id).then((function(n){e.target.classList.add("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length})).catch((function(e){console.error("Не удалось добавить лайк",e)}))}},{key:"_deleteCard",value:function(e){var t=e.target.closest(".mesto-card");this.api.deleteCard(this.id).then((function(){t.remove()})).catch((function(e){console.error("Не удалось удалить карточку",e)}))}},{key:"_onDeleteButtonClick",value:function(e){var t=this;this.handleDeleteClick((function(){t._deleteCard(e)}))}},{key:"_showPhoto",value:function(e){this.handleCardClick(e)}},{key:"_getTemplate",value:function(){return this.template.content.cloneNode(!0)}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".mesto-card__subtitle-icon").addEventListener("click",(function(e){return t._addLike(e)})),e.querySelector(".mesto-card__trash").addEventListener("click",(function(e){return t._onDeleteButtonClick(e)})),e.querySelector(".mesto-card__photo").addEventListener("click",(function(e){return t._showPhoto(e)}))}},{key:"_showTrash",value:function(e){this.currentUser._id===this.owner._id&&(e.querySelector(".mesto-card__trash").style.display="block")}},{key:"_showIsLiked",value:function(e){var t=this;this.likes.find((function(e){return e._id===t.currentUser._id}))&&e.querySelector(".mesto-card__subtitle-icon").classList.add("mesto-card__subtitle-icon_active")}},{key:"createMestoCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".mesto-card__photo"),n=e.querySelector(".mesto-card__subtitle-icon-like");return t.src=this.link,t.alt=this.name,n.textContent=this.likes.length,e.querySelector(".mesto-card__subtitle-name").textContent=this.name,this._showTrash(e),this._showIsLiked(e),this._setEventListeners(e),e}}])&&D(t.prototype,n),e}();function N(e,t,n,o,r,i){return new V(G,{name:e,link:t,likes:n,id:o,owner:r},i,"#mesto-card",M.open,z.open).createMestoCard()}var H=".popup.popup_type_update",J=new _(H,(function(e,t,n){e.preventDefault(),G.updateEditAvatar(t["link-avatar"]).then((function(e){var t=e.avatar;n(),F.updateAvatarUrl(t)})).catch((function(e){console.error("Не удалось обновить аватар",e)}))}),new n(R,H)),F=new j({nameSelector:R.nameSelector,aboutSelector:R.aboutSelector,fotoSelector:R.fotoContainer,handleClick:J.open,fotoInputSelector:".popup__name.popup__name_type_update"}),M=new p(".popup.popup_type_image"),z=new O(".popup.popup_type_confirm"),G=new I({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"82256f25-365c-46ac-aa1f-a846129f6d77","Content-Type":"application/json","Access-Control-Allow-Methods":"POST, GET, DELETE"}}),Y=new T({api:G,renderer:function(e,t){var n=e.name,o=e.link,r=e.likes,i=e.owner;return N(n,o,r,e._id,i,t)},userInfo:F},".elements"),K=".popup.popup_type_edit",Q=new _(K,(function(e,t,n){e.preventDefault(),G.updateEditProfile({name:t.name,about:t.job}).then((function(e){var t=e.name,o=e.about;n(),F.updateNameAndJob({name:t,job:o})})).catch((function(e){console.error("Не удалось обновить профиль",e)}))}),new n(R,K)),W=".popup.popup_type_new-card",X=new _(W,(function(e,t,n){e.preventDefault();var o=t.mesto,r=t.link;G["addNewСard"]({name:o,link:r}).then((function(e){var t=e.name,o=e.owner,i=e.likes,u=e._id;n();var a=F.getUserInfo();Y.addItem(N(t,r,i,u,o,a))})).catch((function(e){console.error("Не удалось добавить новую карточку",e)}))}),new n(R,W));M.setEventListeners(),Q.setEventListeners(),X.setEventListeners(),z.setEventListeners(),J.setEventListeners(),F.setEventListeners(),B.addEventListener("click",(function(){!function(e,t,n){var o=e.getUserInfo(),r=o.name,i=o.about;t.value=r,n.value=i}(F,x,A),Q.open()})),U.addEventListener("click",X.open),G.getInfoAboutPeople().then((function(e){F.setUserInfo(e),Y.initCards().catch((function(e){console.error("Не удалось загрузить карточки",e)}))})).catch((function(e){console.error("Не удалось получить информацию о пользователе",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2hhbmRsZXJzLmpzIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiRm9ybVZhbGlkYXRvciIsImFsbENsYXNzZXMiLCJwYXJlbnRTZWxlY3RvciIsInRoaXMiLCJmb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb250YWluZXJTZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb25zIiwiYmluZCIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInRvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImJ1dHRvbiIsImRpc2FibGVkIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIl92YWxpZGF0ZUlucHV0IiwidGFyZ2V0IiwiY2hlY2tWYWxpZGl0eSIsIl9hZGRWYWxpZGF0aW9uc1RvSW5wdXRzIiwiUG9wdXAiLCJzZWxlY3RvciIsInZhbGlkYXRvciIsInBvcHVwIiwiZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQiLCJvcGVuIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXlDb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xlYXJFcnJvcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiY29udGFpbnMiLCJ0ZXh0IiwidXBkYXRlU3VibWl0QnV0dG9uVGV4dCIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZCIsInNyYyIsImFsdCIsInN1YnRpdGxlIiwiY2xvc2VzdCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtSGFuZGxlciIsInZhbHVlcyIsImlkIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldFN1Ym1pdEJ1dHRvblRleHQiLCJyZXNldCIsIlBvcHVwV2l0aFN1Ym1pdCIsInByZXZlbnREZWZhdWx0Iiwib25TdWJtaXQiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsInByb2ZpbGVEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJjYXJkRGF0YSIsImNhcmRJZCIsImlzRGVsZXRlIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiZm90b1NlbGVjdG9yIiwiaGFuZGxlQ2xpY2siLCJmb3RvSW5wdXRTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsImZvdG9Db250YWluZXIiLCJmb3RvSW5wdXQiLCJ1c2VySW5mbyIsIm5hbWUiLCJhYm91dCIsIl91cGRhdGVVc2VySW5mb09uUGFnZSIsImpvYiIsInVybCIsIlNlY3Rpb24iLCJhcGkiLCJyZW5kZXJlciIsImNvbnRhaW5lciIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwiaXRlbXMiLCJyZW5kZXIiLCJjdXJyZW50VXNlciIsImdldFVzZXJJbmZvIiwiaXRlbSIsInJlbmRlcmVkSXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImZvcm1TZWxlY3RvciIsImRpc2FibGVkQnV0dG9uU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbkFkZCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImxpbmsiLCJsaWtlcyIsIm93bmVyIiwidGVtcGxhdGUiLCJsaWtlQ291bnRDb250YWluZXIiLCJ1cGRhdGVMaWtlIiwiZGF0YSIsImxlbmd0aCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZGVsZXRlQ2FyZCIsIl9kZWxldGVDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIm5ld0NhcmQiLCJfYWRkTGlrZSIsIl9vbkRlbGV0ZUJ1dHRvbkNsaWNrIiwiX3Nob3dQaG90byIsIl9pZCIsInN0eWxlIiwiZGlzcGxheSIsImZpbmQiLCJlbHQiLCJfZ2V0VGVtcGxhdGUiLCJtZXN0byIsImxpa2UiLCJfc2hvd1RyYXNoIiwiX3Nob3dJc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBTdWJtaXQiLCJjcmVhdGVNZXN0b0NhcmQiLCJwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciIsInBvcHVwRWRpdEF2YXRhciIsIm9uU3VjY2VzcyIsImF1dGhvcml6YXRpb24iLCJzZWN0aW9uIiwicG9wdXBXaXRoVXNlckZvcm1TZWxlY3RvciIsInBvcHVwV2l0aFVzZXJGb3JtIiwiZXZ0IiwicG9wdXBXaXRoQWRkTWVzdG9Gb3JtU2VsZWN0b3IiLCJwb3B1cFdpdGhBZGRNZXN0b0Zvcm0iLCJzZXRFdmVudExpc3RlbmVycyIsInNldElucHV0VmFsdWVzIiwiZ2V0SW5mb0Fib3V0UGVvcGxlIiwiaW5mbyIsInNldFVzZXJJbmZvIiwiaW5pdENhcmRzIl0sIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUIsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0Ms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SUFBUTJGLEVBQWdCbEcsRUFBaEJrRyxNQUFPMUIsRUFBU3hFLEVBQVR3RSxLQUVmeEIsZ0JBQWUsQ0FBRU4sS0FBTXdELEVBQU8xQixTQUFRckQsTUFBSyxZQUFpQyxJQUE5QnVCLEVBQThCLEVBQTlCQSxLQUFNZ0MsRUFBd0IsRUFBeEJBLE1BQU9ELEVBQWlCLEVBQWpCQSxNQUFPbUIsRUFBVSxFQUFWQSxJQUNoRWlCLElBQ0EsSUFBTXRELEVBQWNkLEVBQVNlLGNBQzdCdUQsVUFBZ0JSLEVBQVc3RCxFQUFNOEIsRUFBTUMsRUFBT21CLEVBQUtsQixFQUFPbkIsT0FDekR5QixPQUFNLFNBQUNDLEdBQ1JDLFFBQVFDLE1BQU0scUNBQXNDRixRRDBCNkMsSUFBSS9JLEVBQWNDLEVBQVlnTCxJQUVuSVgsRUFBZWEsb0JBQ2ZKLEVBQWtCSSxvQkFDbEJELEVBQXNCQyxvQkFDdEJaLEVBQVlZLG9CQUNaVCxFQUFnQlMsb0JBQ2hCNUUsRUFBUzRFLG9CQVNUckQsRUFBYy9GLGlCQUFpQixTQUFTLFlBUHhDLFNBQXdCd0UsRUFBVXlCLEVBQVdDLEdBQzNDLE1BQXdCMUIsRUFBU2UsY0FBekJkLEVBQVIsRUFBUUEsS0FBTUMsRUFBZCxFQUFjQSxNQUVkdUIsRUFBVWhFLE1BQVF3QyxFQUNsQnlCLEVBQVNqRSxNQUFReUMsRUFJakIyRSxDQUFlN0UsRUFBVXlCLEVBQVdDLEdBQ3BDOEMsRUFBa0JySSxVQUdwQnFGLEVBQWlCaEcsaUJBQWlCLFFBQVNtSixFQUFzQnhJLE1BRWpFb0UsRUFBSXVFLHFCQUFxQnBHLE1BQUssU0FBQ3FHLEdBQzdCL0UsRUFBU2dGLFlBQVlELEdBRXJCVCxFQUFRVyxZQUFZMUMsT0FBTSxTQUFDQyxHQUN6QkMsUUFBUUMsTUFBTSxnQ0FBaUNGLFNBRWhERCxPQUFNLFNBQUFDLEdBQ1BDLFFBQVFDLE1BQU0sZ0RBQWlERixPIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoYWxsQ2xhc3NlcywgcGFyZW50U2VsZWN0b3IpIHtcbiAgICB0aGlzLmFsbENsYXNzZXMgPSBhbGxDbGFzc2VzO1xuICAgIHRoaXMuZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7cGFyZW50U2VsZWN0b3J9IGZvcm1gKTtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKGFsbENsYXNzZXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLmFsbENsYXNzZXMuaW5wdXRDb250YWluZXJTZWxlY3RvcikpO1xuICAgIHRoaXMuZW5hYmxlVmFsaWRhdGlvbnMgPSB0aGlzLmVuYWJsZVZhbGlkYXRpb25zLmJpbmQodGhpcyk7XG4gIH1cblxuICBfdmFsaWRhdGVJbnB1dChpbnB1dCwgZXJyb3JFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVycm9yRWxlbWVudCk7XG4gICAgfVxuICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JFbGVtZW50KSB7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbihidXR0b24pIHtcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfYWRkVmFsaWRhdGlvbnNUb0lucHV0cygpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0LnF1ZXJ5U2VsZWN0b3IodGhpcy5hbGxDbGFzc2VzLmlucHV0U2VsZWN0b3IpXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVJbnB1dChlLnRhcmdldCwgZXJyb3JFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBjbGVhckVycm9ycygpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0LnF1ZXJ5U2VsZWN0b3IodGhpcy5hbGxDbGFzc2VzLmlucHV0RXJyb3JTZWxlY3RvcikpKTtcbiAgfVxuXG4gIHRvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLmZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbnMoKSB7XG4gICAgdGhpcy5fYWRkVmFsaWRhdGlvbnNUb0lucHV0cygpO1xuICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcbiAgfVxufVxuIiwiY29uc3QgRVNDQVBFX0tFWUNPREUgPSAyNztcblxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHZhbGlkYXRvcikge1xuICAgIHRoaXMucG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcblxuICAgIGlmICh0aGlzLnN1Ym1pdEJ1dHRvbikge1xuICAgICAgdGhpcy5kZWZhdWx0U3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSBFU0NBUEVfS0VZQ09ERSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuXG4gICAgaWYgKHRoaXMudmFsaWRhdG9yKSB7XG4gICAgICB0aGlzLnZhbGlkYXRvci5jbGVhckVycm9ycygpO1xuICAgICAgdGhpcy52YWxpZGF0b3IudG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjbG9zZUljb24gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtaWNvbicpO1xuICAgIGNsb3NlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnZhbGlkYXRvcikge1xuICAgICAgdGhpcy52YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcbiAgICBpZiAodGhpcy5zdWJtaXRCdXR0b24pIHtcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gIH1cblxuICByZXNldFN1Ym1pdEJ1dHRvblRleHQoKSB7XG4gICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b25UZXh0KHRoaXMuZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQpXG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKGUpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgY2FyZC5zcmMgPSBlLnRhcmdldC5zcmM7XG4gICAgY2FyZC5hbHQgPSBlLnRhcmdldC5hbHQ7XG4gICAgY29uc3QgcGFyZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lc3RvLWNhcmQnKTtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbmFtZScpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0JykudGV4dENvbnRlbnQgPSBzdWJ0aXRsZS50ZXh0Q29udGVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHN1Ym1pdEZvcm1IYW5kbGVyLCB2YWxpZGF0b3IpIHtcbiAgICBzdXBlcihzZWxlY3RvciwgdmFsaWRhdG9yKTtcbiAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyID0gc3VibWl0Rm9ybUhhbmRsZXI7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG5cbiAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdmFsdWVzW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICAgICAgdGhpcy5zdWJtaXRGb3JtSGFuZGxlcihlLCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5yZXNldFN1Ym1pdEJ1dHRvblRleHQoKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuZm9ybSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG5cbiAgb3BlbihvblN1Ym1pdCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyID0gb25TdWJtaXQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJ2NhcmRzLycsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEluZm9BYm91dFBlb3BsZSgpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJ3VzZXJzL21lLycsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUVkaXRQcm9maWxlKHByb2ZpbGVEYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ3VzZXJzL21lLycsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9maWxlRGF0YSksXG4gICAgICB9LFxuICAgICkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUVkaXRBdmF0YXIoYXZhdGFyVXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ3VzZXJzL21lL2F2YXRhcicsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogYXZhdGFyVXJsIH0pLFxuICAgICAgfSxcbiAgICApLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhZGROZXfQoWFyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICdjYXJkcycsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKSxcbiAgICAgIH0sXG4gICAgKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAnY2FyZHMvJyArIGNhcmRJZCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICApLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVMaWtlKGNhcmRJZCwgaXNEZWxldGUpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAnY2FyZHMvbGlrZXMvJyArIGNhcmRJZCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBpc0RlbGV0ZSA/ICdERUxFVEUnIDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgZm90b1NlbGVjdG9yLCBoYW5kbGVDbGljaywgZm90b0lucHV0U2VsZWN0b3IgfSkge1xuICAgIHRoaXMucHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMucHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLmZvdG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvdG9TZWxlY3Rvcik7XG4gICAgdGhpcy5mb3RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvdG9JbnB1dFNlbGVjdG9yKTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrID0gaGFuZGxlQ2xpY2s7XG4gIH1cblxuICBfdXBkYXRlVXNlckluZm9PblBhZ2UoKSB7XG4gICAgdGhpcy5wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnVzZXJJbmZvLm5hbWU7XG4gICAgdGhpcy5wcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnVzZXJJbmZvLmFib3V0O1xuICAgIHRoaXMuZm90b0lucHV0LnZhbHVlID0gdGhpcy51c2VySW5mby5hdmF0YXI7XG4gICAgdGhpcy5mb3RvQ29udGFpbmVyLnNyYyA9IHRoaXMudXNlckluZm8uYXZhdGFyO1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckluZm8pIHtcbiAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm87XG4gICAgdGhpcy5fdXBkYXRlVXNlckluZm9PblBhZ2UoKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLnVzZXJJbmZvO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5mb3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIHRoaXMuX3VwZGF0ZVVzZXJJbmZvT25QYWdlKCk7XG4gICAgICB0aGlzLmhhbmRsZUNsaWNrKGUpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlTmFtZUFuZEpvYih7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy51c2VySW5mby5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnVzZXJJbmZvLmFib3V0ID0gam9iO1xuICAgIHRoaXMuX3VwZGF0ZVVzZXJJbmZvT25QYWdlKCk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXJVcmwodXJsKSB7XG4gICAgdGhpcy51c2VySW5mby5hdmF0YXIgPSB1cmw7XG4gICAgdGhpcy5fdXBkYXRlVXNlckluZm9PblBhZ2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGFwaSwgcmVuZGVyZXIsIHVzZXJJbmZvIH0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy51c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgaW5pdENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKGNhcmRzID0+IHtcbiAgICAgIHRoaXMuaXRlbXMgPSBjYXJkcztcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB0aGlzLnVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJlZEl0ZW0gPSB0aGlzLnJlbmRlcmVyKGl0ZW0sIGN1cnJlbnRVc2VyKTtcbiAgICAgIHRoaXMuYWRkSXRlbShyZW5kZXJlZEl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGFsbENsYXNzZXMgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5wdXRDb250YWluZXJTZWxlY3RvcjogJy5wb3B1cF9fbmFtZS1jb250YWluZXInLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19uYW1lJyxcbiAgaW5wdXRFcnJvclNlbGVjdG9yOiAnLnBvcHVwX19uYW1lLnBvcHVwX19uYW1lX3R5cGVfZXJyJyxcbiAgZGlzYWJsZWRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fY29udGFpbmVyX25ldy1jYXJkIC5wb3B1cF9fYnV0dG9uJyxcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tdGl0bGUnLFxuICBmb3RvQ29udGFpbmVyOiAnLnByb2ZpbGVfX2ZvdG8nLFxuICBhYm91dFNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tc3VidGl0bGUnLFxufTtcblxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XG5leHBvcnQgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fdHJhc2gnKTtcbmV4cG9ydCBjb25zdCBuYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhbGxDbGFzc2VzLm5hbWVTZWxlY3Rvcik7XG5leHBvcnQgY29uc3QgYWJvdXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mby1zdWJ0aXRsZScpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJyk7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjam9iJyk7IiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcGksXG4gICAgeyBuYW1lLCBsaW5rLCBsaWtlcywgaWQsIG93bmVyIH0sXG4gICAgY3VycmVudFVzZXIsXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5saWtlcyA9IGxpa2VzO1xuICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICB0aGlzLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG5cbiAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gIH1cblxuICAvKiog0J/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LggKi9cblxuICBfYWRkTGlrZShlKSB7XG4gICAgY29uc3QgbGlrZUNvbnRhaW5lciA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1saWtlJyk7XG4gICAgY29uc3QgbGlrZUNvdW50Q29udGFpbmVyID0gbGlrZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbi1saWtlJyk7XG5cbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpKSB7XG4gICAgICB0aGlzLmFwaS51cGRhdGVMaWtlKHRoaXMuaWQsIHRydWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKTtcbiAgICAgICAgbGlrZUNvdW50Q29udGFpbmVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0YPQsdGA0LDRgtGMINC70LDQudC6JywgZXJyKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwaS51cGRhdGVMaWtlKHRoaXMuaWQpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKTtcbiAgICAgICAgbGlrZUNvdW50Q29udGFpbmVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0LTQvtCx0LDQstC40YLRjCDQu9Cw0LnQuicsIGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfZGVsZXRlQ2FyZChlKSB7XG4gICAgY29uc3QgY2FyZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5tZXN0by1jYXJkJyk7XG5cbiAgICB0aGlzLmFwaS5kZWxldGVDYXJkKHRoaXMuaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcign0J3QtSDRg9C00LDQu9C+0YHRjCDRg9C00LDQu9C40YLRjCDQutCw0YDRgtC+0YfQutGDJywgZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX29uRGVsZXRlQnV0dG9uQ2xpY2soZSkge1xuICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2soKCkgPT4geyB0aGlzLl9kZWxldGVDYXJkKGUpOyB9KTtcbiAgfVxuXG4gIF9zaG93UGhvdG8oZSkge1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrKGUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhuZXdDYXJkKSB7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX2FkZExpa2UoZSkpO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5fb25EZWxldGVCdXR0b25DbGljayhlKSk7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fcGhvdG8nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9zaG93UGhvdG8oZSkpO1xuICB9XG5cbiAgX3Nob3dUcmFzaChuZXdDYXJkKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXIuX2lkID09PSB0aGlzLm93bmVyLl9pZCkge1xuICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fdHJhc2gnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICB9XG5cbiAgX3Nob3dJc0xpa2VkKG5ld0NhcmQpIHtcbiAgICBjb25zdCBteUxpa2UgPSB0aGlzLmxpa2VzLmZpbmQoKGVsdCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZWx0Ll9pZCA9PT0gdGhpcy5jdXJyZW50VXNlci5faWQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICAgIGlmIChteUxpa2UpIHtcbiAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24nKS5jbGFzc0xpc3QuYWRkKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZU1lc3RvQ2FyZCgpIHtcbiAgICBjb25zdCBuZXdDYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICBjb25zdCBtZXN0byA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3Bob3RvJyk7XG4gICAgY29uc3QgbGlrZSA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24tbGlrZScpO1xuICAgIG1lc3RvLnNyYyA9IHRoaXMubGluaztcbiAgICBtZXN0by5hbHQgPSB0aGlzLm5hbWU7XG4gICAgbGlrZS50ZXh0Q29udGVudCA9IHRoaXMubGlrZXMubGVuZ3RoO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLW5hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9zaG93VHJhc2gobmV3Q2FyZCk7XG4gICAgdGhpcy5fc2hvd0lzTGlrZWQobmV3Q2FyZCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhuZXdDYXJkKTtcbiAgICByZXR1cm4gbmV3Q2FyZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZHMuanMnO1xuaW1wb3J0IHsgcG9wdXBXaXRoSW1hZ2UsIHBvcHVwU3VibWl0LCBhcGkgfSBmcm9tICcuLi8uLi9wYWdlcy9pbmRleCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKG5hbWUsIGxpbmssIGxpa2VzLCBpZCwgb3duZXIsIGN1cnJlbnRVc2VyKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBhcGksXG4gICAgeyBuYW1lLCBsaW5rLCBsaWtlcywgaWQsIG93bmVyIH0sXG4gICAgY3VycmVudFVzZXIsXG4gICAgJyNtZXN0by1jYXJkJyxcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuLFxuICAgIHBvcHVwU3VibWl0Lm9wZW4sXG4gICk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZU1lc3RvQ2FyZCgpO1xufVxuIiwiaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhTdWJtaXQgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzJztcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7XG4gIGFsbENsYXNzZXMsXG4gIHByb2ZpbGVCdXR0b24sXG4gIHByb2ZpbGVCdXR0b25BZGQsXG4gIG5hbWVJbnB1dCxcbiAgam9iSW5wdXQsXG59IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVTdWJtaXQsIGhhbmRsZUFkZE1lc3RvU3VibWl0LCBoYW5kbGVFZGl0QXZhdGFyIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9oYW5kbGVycy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkIH0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9oZWxwZXJzLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IHBvcHVwRWRpdEF2YXRhclNlbGVjdG9yID0gXCIucG9wdXAucG9wdXBfdHlwZV91cGRhdGVcIjtcbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdEF2YXRhclNlbGVjdG9yLCBoYW5kbGVFZGl0QXZhdGFyLCBuZXcgRm9ybVZhbGlkYXRvcihhbGxDbGFzc2VzLCBwb3B1cEVkaXRBdmF0YXJTZWxlY3RvcikpO1xuXG5leHBvcnQgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IGFsbENsYXNzZXMubmFtZVNlbGVjdG9yLFxuICBhYm91dFNlbGVjdG9yOiBhbGxDbGFzc2VzLmFib3V0U2VsZWN0b3IsXG4gIGZvdG9TZWxlY3RvcjogYWxsQ2xhc3Nlcy5mb3RvQ29udGFpbmVyLFxuICBoYW5kbGVDbGljazogcG9wdXBFZGl0QXZhdGFyLm9wZW4sXG4gIGZvdG9JbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19uYW1lLnBvcHVwX19uYW1lX3R5cGVfdXBkYXRlJyxcbn0pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cC5wb3B1cF90eXBlX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBTdWJtaXQgPSBuZXcgUG9wdXBXaXRoU3VibWl0KCcucG9wdXAucG9wdXBfdHlwZV9jb25maXJtJyk7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjYvJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc4MjI1NmYyNS0zNjVjLTQ2YWMtYWExZi1hODQ2MTI5ZjZkNzcnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnUE9TVCwgR0VULCBERUxFVEUnLFxuICB9XG59KTtcblxuY29uc3QgcmVuZGVyZXIgPSAoeyBuYW1lLCBsaW5rLCBsaWtlcywgb3duZXIsIF9pZCB9LCBjdXJyZW50VXNlcikgPT4gY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlcywgX2lkLCBvd25lciwgY3VycmVudFVzZXIpO1xuZXhwb3J0IGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IGFwaSwgcmVuZGVyZXIsIHVzZXJJbmZvIH0sICcuZWxlbWVudHMnKTtcblxuY29uc3QgcG9wdXBXaXRoVXNlckZvcm1TZWxlY3RvciA9ICcucG9wdXAucG9wdXBfdHlwZV9lZGl0JztcbmNvbnN0IHBvcHVwV2l0aFVzZXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBXaXRoVXNlckZvcm1TZWxlY3RvciwgaGFuZGxlUHJvZmlsZVN1Ym1pdCwgbmV3IEZvcm1WYWxpZGF0b3IoYWxsQ2xhc3NlcywgcG9wdXBXaXRoVXNlckZvcm1TZWxlY3RvcikpO1xuXG5jb25zdCBwb3B1cFdpdGhBZGRNZXN0b0Zvcm1TZWxlY3RvciA9ICcucG9wdXAucG9wdXBfdHlwZV9uZXctY2FyZCdcbmNvbnN0IHBvcHVwV2l0aEFkZE1lc3RvRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwV2l0aEFkZE1lc3RvRm9ybVNlbGVjdG9yLCBoYW5kbGVBZGRNZXN0b1N1Ym1pdCwgbmV3IEZvcm1WYWxpZGF0b3IoYWxsQ2xhc3NlcywgcG9wdXBXaXRoQWRkTWVzdG9Gb3JtU2VsZWN0b3IpKTtcblxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aFVzZXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhBZGRNZXN0b0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwU3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnVzZXJJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHNldElucHV0VmFsdWVzKHVzZXJJbmZvLCBuYW1lSW5wdXQsIGpvYklucHV0KSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBhYm91dDtcbn1cblxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgc2V0SW5wdXRWYWx1ZXModXNlckluZm8sIG5hbWVJbnB1dCwgam9iSW5wdXQpO1xuICBwb3B1cFdpdGhVc2VyRm9ybS5vcGVuKCk7XG59KTtcblxucHJvZmlsZUJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBvcHVwV2l0aEFkZE1lc3RvRm9ybS5vcGVuKVxuXG5hcGkuZ2V0SW5mb0Fib3V0UGVvcGxlKCkudGhlbigoaW5mbykgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbmZvKTtcblxuICBzZWN0aW9uLmluaXRDYXJkcygpLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC30LDQs9GA0YPQt9C40YLRjCDQutCw0YDRgtC+0YfQutC4JywgZXJyKTtcbiAgfSk7XG59KS5jYXRjaChlcnIgPT4ge1xuICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1JywgZXJyKTtcbn0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlQ2FyZCB9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQgeyB1c2VySW5mbywgc2VjdGlvbiwgYXBpIH0gZnJvbSAnLi4vLi4vcGFnZXMvaW5kZXgnO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdChldnQsIHZhbHVlcywgb25TdWNjZXNzKSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGFwaS51cGRhdGVFZGl0UHJvZmlsZSh7IG5hbWU6IHZhbHVlcy5uYW1lLCBhYm91dDogdmFsdWVzLmpvYiB9KS50aGVuKCh7IG5hbWUsIGFib3V0OiBqb2IgfSkgPT4ge1xuICAgIG9uU3VjY2VzcygpO1xuICAgIHVzZXJJbmZvLnVwZGF0ZU5hbWVBbmRKb2IoeyBuYW1lLCBqb2IgfSk7XG4gIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC+0LHQvdC+0LLQuNGC0Ywg0L/RgNC+0YTQuNC70YwnLCBlcnIpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUFkZE1lc3RvU3VibWl0KGUsIHZhbHVlcywgb25TdWNjZXNzKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgeyBtZXN0bywgbGluayB9ID0gdmFsdWVzO1xuXG4gIGFwaS5hZGROZXfQoWFyZCh7IG5hbWU6IG1lc3RvLCBsaW5rIH0pLnRoZW4oKHsgbmFtZSwgb3duZXIsIGxpa2VzLCBfaWQgfSkgPT4ge1xuICAgIG9uU3VjY2VzcygpO1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlcywgX2lkLCBvd25lciwgY3VycmVudFVzZXIpKTtcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0LTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMnLCBlcnIpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUVkaXRBdmF0YXIoZSwgdmFsdWVzLCBvblN1Y2Nlc3MpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGFwaS51cGRhdGVFZGl0QXZhdGFyKHZhbHVlc1snbGluay1hdmF0YXInXSkudGhlbigoeyBhdmF0YXIgfSkgPT4ge1xuICAgIG9uU3VjY2VzcygpO1xuICAgIHVzZXJJbmZvLnVwZGF0ZUF2YXRhclVybChhdmF0YXIpO1xuICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcign0J3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0L3QvtCy0LjRgtGMINCw0LLQsNGC0LDRgCcsIGVycik7XG4gIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==