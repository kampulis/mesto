(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.d({},{hi:()=>G,kJ:()=>z,lH:()=>M,qi:()=>Y,eY:()=>F});var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.allClasses=t,this.form=document.querySelector("".concat(n," form")),this.submitButton=this.form.querySelector(t.submitButtonSelector),this.inputs=Array.from(this.form.querySelectorAll(this.allClasses.inputContainerSelector)),this.enableValidations=this.enableValidations.bind(this)}var n,o;return n=e,(o=[{key:"_validateInput",value:function(e,t){e.validity.valid?this._hideInputError(t):this._showInputError(e,t),this.toggleSubmitButtonState()}},{key:"_showInputError",value:function(e,t){t.textContent=e.validationMessage}},{key:"_disableButton",value:function(e){e.disabled=!0}},{key:"_hideInputError",value:function(e){e.textContent=""}},{key:"_addValidationsToInputs",value:function(){var e=this;this.inputs.forEach((function(t){var n=t.querySelector(e.allClasses.inputSelector),o=t.querySelector(e.allClasses.inputErrorSelector);n.addEventListener("input",(function(t){e._validateInput(t.target,o)}))}))}},{key:"clearErrors",value:function(){var e=this;this.inputs.forEach((function(t){return e._hideInputError(t.querySelector(e.allClasses.inputErrorSelector))}))}},{key:"toggleSubmitButtonState",value:function(){this.form.checkValidity()?this.submitButton.disabled=!1:this.submitButton.disabled=!0}},{key:"enableValidations",value:function(){this._addValidationsToInputs(),this.toggleSubmitButtonState()}}])&&t(n.prototype,o),e}();function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.submitButton=this.popup.querySelector('button[type="submit"]'),this.submitButton&&(this.defaultSubmitButtonText=this.submitButton.textContent),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){27===e.keyCode&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this.popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this.popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-icon").addEventListener("click",this.close),this.popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}},{key:"updateSubmitButtonText",value:function(e){this.submitButton&&(this.submitButton.textContent=e)}},{key:"resetSubmitButtonText",value:function(){this.updateSubmitButtonText(this.defaultSubmitButtonText)}}])&&o(t.prototype,n),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,o,r,i=(o=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(r){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function p(){return u(this,p),i.apply(this,arguments)}return t=p,(n=[{key:"open",value:function(e){s(f(p.prototype),"open",this).call(this);var t=this.popup.querySelector("img");t.src=e.target.src,t.alt=e.target.alt;var n=e.target.closest(".mesto-card").querySelector(".mesto-card__subtitle-name");this.popup.querySelector(".popup__text").textContent=n.textContent}}])&&a(t.prototype,n),p}(r);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(o);if(r){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(o=i.call(this,e,n)).submitFormHandler=t,o.form=o.popup.querySelector("form"),o.validator=n,o}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this.form.querySelectorAll("input").forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;y(m(u.prototype),"setEventListeners",this).call(this),this.validator.enableValidations(),this.form.addEventListener("submit",(function(t){e.updateSubmitButtonText("Сохранение..."),e.submitFormHandler(t,e._getInputValues(),(function(){e.close(),e.resetSubmitButtonText()}))}))}},{key:"open",value:function(){y(m(u.prototype),"open",this).call(this),this.validator.clearErrors(),this.validator.toggleSubmitButtonState()}},{key:"close",value:function(){y(m(u.prototype),"close",this).call(this),this.form.reset()}}])&&d(t.prototype,n),u}(r);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(r){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).form=t.popup.querySelector("form"),t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;g(C(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitFormHandler(),e.close()}))}},{key:"open",value:function(e){g(C(u.prototype),"open",this).call(this),this.submitFormHandler=e}}])&&S(t.prototype,n),u}(r);function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(t){var n=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=o}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch(this.baseUrl+"cards/",{headers:this.headers}).then(this._checkResponse)}},{key:"getInfoAboutPeople",value:function(){return fetch(this.baseUrl+"users/me/",{headers:this.headers}).then(this._checkResponse)}},{key:"updateEditProfile",value:function(e){return fetch(this.baseUrl+"users/me/",{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"updateEditAvatar",value:function(e){return fetch(this.baseUrl+"users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"addNewСard",value:function(e){return fetch(this.baseUrl+"cards",{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch(this.baseUrl+"cards/"+e,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}},{key:"updateLike",value:function(e,t){return fetch(this.baseUrl+"cards/likes/"+e,{method:t?"DELETE":"PUT",headers:this.headers}).then(this._checkResponse)}}])&&P(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=function(){function e(t){var n=t.nameSelector,o=t.aboutSelector,r=t.fotoSelector,i=t.handleClick,u=t.fotoInputSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileTitle=document.querySelector(n),this.profileSubtitle=document.querySelector(o),this.fotoContainer=document.querySelector(r),this.fotoInput=document.querySelector(u),this.handleClick=i}var t,n;return t=e,(n=[{key:"_updateUserInfoOnPage",value:function(){this.profileTitle.textContent=this.userInfo.name,this.profileSubtitle.textContent=this.userInfo.about,this.fotoInput.value=this.userInfo.avatar,this.fotoContainer.src=this.userInfo.avatar}},{key:"setUserInfo",value:function(e){this.userInfo=e,this._updateUserInfoOnPage()}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setEventListeners",value:function(){var e=this;this.fotoContainer.addEventListener("click",(function(t){e._updateUserInfoOnPage(),e.handleClick(t)}))}},{key:"updateNameAndJob",value:function(e){var t=e.name,n=e.job;this.userInfo.name=t,this.userInfo.about=n,this._updateUserInfoOnPage()}},{key:"updateAvatarUrl",value:function(e){this.userInfo.avatar=e,this._updateUserInfoOnPage()}}])&&L(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var T=function(){function e(t,n){var o=t.api,r=t.renderer,i=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=o,this.userInfo=i,this.renderer=r,this.container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"initCards",value:function(){var e=this;return this.api.getInitialCards().then((function(t){e.items=t,e.render()}))}},{key:"render",value:function(){var e=this,t=this.userInfo.getUserInfo();this.items.forEach((function(n){var o=e.renderer(n,t);e.addItem(o)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&q(t.prototype,n),e}(),R={formSelector:".popup__input",submitButtonSelector:".popup__button",inputContainerSelector:".popup__name-container",inputSelector:".popup__name",inputErrorSelector:".popup__name.popup__name_type_err",disabledButtonSelector:".popup__container_new-card .popup__button",nameSelector:".profile__info-title",fotoContainer:".profile__foto",aboutSelector:".profile__info-subtitle"},B=document.querySelector(".profile").querySelector(".profile__button"),U=document.querySelector(".profile__button-add"),x=(document.querySelector(".mesto-card__trash"),document.querySelector(R.nameSelector),document.querySelector(".profile__info-subtitle"),document.querySelector("#name")),A=document.querySelector("#job");function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var V=function(){function e(t,n,o,r,i,u){var a=n.name,s=n.link,c=n.likes,l=n.id,f=n.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=l,this.api=t,this.name=a,this.link=s,this.likes=c,this.owner=f,this.currentUser=o,this.template=document.querySelector(r),this.handleCardClick=i,this.handleDeleteClick=u}var t,n;return t=e,(n=[{key:"_addLike",value:function(e){var t=e.target.closest(".mesto-card__subtitle-like").querySelector(".mesto-card__subtitle-icon-like");e.target.classList.contains("mesto-card__subtitle-icon_active")?this.api.updateLike(this.id,!0).then((function(n){e.target.classList.remove("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length})).catch((function(e){console.error("Не удалось убрать лайк",e)})):this.api.updateLike(this.id).then((function(n){e.target.classList.add("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length})).catch((function(e){console.error("Не удалось добавить лайк",e)}))}},{key:"_deleteCard",value:function(e){var t=e.target.closest(".mesto-card");this.api.deleteCard(this.id).then((function(){t.remove()})).catch((function(e){console.error("Не удалось удалить карточку",e)}))}},{key:"_onDeleteButtonClick",value:function(e){var t=this;this.handleDeleteClick((function(){t._deleteCard(e)}))}},{key:"_showPhoto",value:function(e){this.handleCardClick(e)}},{key:"_getTemplate",value:function(){return this.template.content.cloneNode(!0)}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".mesto-card__subtitle-icon").addEventListener("click",(function(e){return t._addLike(e)})),e.querySelector(".mesto-card__trash").addEventListener("click",(function(e){return t._onDeleteButtonClick(e)})),e.querySelector(".mesto-card__photo").addEventListener("click",(function(e){return t._showPhoto(e)}))}},{key:"_showTrash",value:function(e){this.currentUser._id===this.owner._id&&(e.querySelector(".mesto-card__trash").style.display="block")}},{key:"_showIsLiked",value:function(e){var t=this;this.likes.find((function(e){return e._id===t.currentUser._id}))&&e.querySelector(".mesto-card__subtitle-icon").classList.add("mesto-card__subtitle-icon_active")}},{key:"createMestoCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".mesto-card__photo"),n=e.querySelector(".mesto-card__subtitle-icon-like");return t.src=this.link,t.alt=this.name,n.textContent=this.likes.length,e.querySelector(".mesto-card__subtitle-name").textContent=this.name,this._showTrash(e),this._showIsLiked(e),this._setEventListeners(e),e}}])&&D(t.prototype,n),e}();function N(e,t,n,o,r,i){return new V(G,{name:e,link:t,likes:n,id:o,owner:r},i,"#mesto-card",M.open,z.open).createMestoCard()}var H=".popup.popup_type_update",J=new _(H,(function(e,t,n){e.preventDefault(),G.updateEditAvatar(t["link-avatar"]).then((function(e){var t=e.avatar;n(),F.updateAvatarUrl(t)})).catch((function(e){console.error("Не удалось обновить аватар",e)}))}),new n(R,H)),F=new j({nameSelector:R.nameSelector,aboutSelector:R.aboutSelector,fotoSelector:R.fotoContainer,handleClick:J.open,fotoInputSelector:".popup__name.popup__name_type_update"}),M=new p(".popup.popup_type_image"),z=new O(".popup.popup_type_confirm"),G=new I({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"82256f25-365c-46ac-aa1f-a846129f6d77","Content-Type":"application/json","Access-Control-Allow-Methods":"POST, GET, DELETE"}}),Y=new T({api:G,renderer:function(e,t){var n=e.name,o=e.link,r=e.likes,i=e.owner;return N(n,o,r,e._id,i,t)},userInfo:F},".elements"),K=".popup.popup_type_edit",Q=new _(K,(function(e,t,n){e.preventDefault(),G.updateEditProfile({name:t.name,about:t.job}).then((function(e){var t=e.name,o=e.about;n(),F.updateNameAndJob({name:t,job:o})})).catch((function(e){console.error("Не удалось обновить профиль",e)}))}),new n(R,K)),W=".popup.popup_type_new-card",X=new _(W,(function(e,t,n){e.preventDefault();var o=t.mesto,r=t.link;G["addNewСard"]({name:o,link:r}).then((function(e){var t=e.name,o=e.owner,i=e.likes,u=e._id;n();var a=F.getUserInfo();Y.addItem(N(t,r,i,u,o,a))})).catch((function(e){console.error("Не удалось добавить новую карточку",e)}))}),new n(R,W));M.setEventListeners(),Q.setEventListeners(),X.setEventListeners(),z.setEventListeners(),J.setEventListeners(),F.setEventListeners(),B.addEventListener("click",(function(){!function(e,t,n){var o=e.getUserInfo(),r=o.name,i=o.about;t.value=r,n.value=i}(F,x,A),Q.open()})),U.addEventListener("click",X.open),G.getInfoAboutPeople().then((function(e){F.setUserInfo(e),Y.initCards().catch((function(e){console.error("Не удалось загрузить карточки",e)}))})).catch((function(e){console.error("Не удалось получить информацию о пользователе",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2hhbmRsZXJzLmpzIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiRm9ybVZhbGlkYXRvciIsImFsbENsYXNzZXMiLCJwYXJlbnRTZWxlY3RvciIsInRoaXMiLCJmb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb250YWluZXJTZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb25zIiwiYmluZCIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInRvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImJ1dHRvbiIsImRpc2FibGVkIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIl92YWxpZGF0ZUlucHV0IiwidGFyZ2V0IiwiY2hlY2tWYWxpZGl0eSIsIl9hZGRWYWxpZGF0aW9uc1RvSW5wdXRzIiwiUG9wdXAiLCJzZWxlY3RvciIsInBvcHVwIiwiZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQiLCJvcGVuIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXlDb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsImNvbnRhaW5zIiwidGV4dCIsInVwZGF0ZVN1Ym1pdEJ1dHRvblRleHQiLCJQb3B1cFdpdGhJbWFnZSIsImNhcmQiLCJzcmMiLCJhbHQiLCJzdWJ0aXRsZSIsImNsb3Nlc3QiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybUhhbmRsZXIiLCJ2YWxpZGF0b3IiLCJ2YWx1ZXMiLCJpZCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXRTdWJtaXRCdXR0b25UZXh0IiwiY2xlYXJFcnJvcnMiLCJyZXNldCIsIlBvcHVwV2l0aFN1Ym1pdCIsInByZXZlbnREZWZhdWx0Iiwib25TdWJtaXQiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsInByb2ZpbGVEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJjYXJkRGF0YSIsImNhcmRJZCIsImlzRGVsZXRlIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiZm90b1NlbGVjdG9yIiwiaGFuZGxlQ2xpY2siLCJmb3RvSW5wdXRTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsImZvdG9Db250YWluZXIiLCJmb3RvSW5wdXQiLCJ1c2VySW5mbyIsIm5hbWUiLCJhYm91dCIsIl91cGRhdGVVc2VySW5mb09uUGFnZSIsImpvYiIsInVybCIsIlNlY3Rpb24iLCJhcGkiLCJyZW5kZXJlciIsImNvbnRhaW5lciIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwiaXRlbXMiLCJyZW5kZXIiLCJjdXJyZW50VXNlciIsImdldFVzZXJJbmZvIiwiaXRlbSIsInJlbmRlcmVkSXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImZvcm1TZWxlY3RvciIsImRpc2FibGVkQnV0dG9uU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbkFkZCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImxpbmsiLCJsaWtlcyIsIm93bmVyIiwidGVtcGxhdGUiLCJsaWtlQ291bnRDb250YWluZXIiLCJ1cGRhdGVMaWtlIiwiZGF0YSIsImxlbmd0aCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZGVsZXRlQ2FyZCIsIl9kZWxldGVDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIm5ld0NhcmQiLCJfYWRkTGlrZSIsIl9vbkRlbGV0ZUJ1dHRvbkNsaWNrIiwiX3Nob3dQaG90byIsIl9pZCIsInN0eWxlIiwiZGlzcGxheSIsImZpbmQiLCJlbHQiLCJfZ2V0VGVtcGxhdGUiLCJtZXN0byIsImxpa2UiLCJfc2hvd1RyYXNoIiwiX3Nob3dJc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBTdWJtaXQiLCJjcmVhdGVNZXN0b0NhcmQiLCJwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciIsInBvcHVwRWRpdEF2YXRhciIsIm9uU3VjY2VzcyIsImF1dGhvcml6YXRpb24iLCJzZWN0aW9uIiwicG9wdXBXaXRoVXNlckZvcm1TZWxlY3RvciIsInBvcHVwV2l0aFVzZXJGb3JtIiwiZXZ0IiwicG9wdXBXaXRoQWRkTWVzdG9Gb3JtU2VsZWN0b3IiLCJwb3B1cFdpdGhBZGRNZXN0b0Zvcm0iLCJzZXRFdmVudExpc3RlbmVycyIsInNldElucHV0VmFsdWVzIiwiZ2V0SW5mb0Fib3V0UGVvcGxlIiwiaW5mbyIsInNldFVzZXJJbmZvIiwiaW5pdENhcmRzIl0sIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUIsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0Ms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bUcsTUFBTzFCLEVBQVN6RSxFQUFUeUUsS0FFZnhCLGdCQUFlLENBQUVOLEtBQU13RCxFQUFPMUIsU0FBUXJELE1BQUssWUFBaUMsSUFBOUJ1QixFQUE4QixFQUE5QkEsS0FBTWdDLEVBQXdCLEVBQXhCQSxNQUFPRCxFQUFpQixFQUFqQkEsTUFBT21CLEVBQVUsRUFBVkEsSUFDaEVpQixJQUNBLElBQU10RCxFQUFjZCxFQUFTZSxjQUM3QnVELFVBQWdCUixFQUFXN0QsRUFBTThCLEVBQU1DLEVBQU9tQixFQUFLbEIsRUFBT25CLE9BQ3pEeUIsT0FBTSxTQUFDQyxHQUNSQyxRQUFRQyxNQUFNLHFDQUFzQ0YsUUQwQjZDLElBQUkvSSxFQUFjQyxFQUFZZ0wsSUFFbklYLEVBQWVhLG9CQUNmSixFQUFrQkksb0JBQ2xCRCxFQUFzQkMsb0JBQ3RCWixFQUFZWSxvQkFDWlQsRUFBZ0JTLG9CQUNoQjVFLEVBQVM0RSxvQkFTVHJELEVBQWMvRixpQkFBaUIsU0FBUyxZQVB4QyxTQUF3QndFLEVBQVV5QixFQUFXQyxHQUMzQyxNQUF3QjFCLEVBQVNlLGNBQXpCZCxFQUFSLEVBQVFBLEtBQU1DLEVBQWQsRUFBY0EsTUFFZHVCLEVBQVVqRSxNQUFReUMsRUFDbEJ5QixFQUFTbEUsTUFBUTBDLEVBSWpCMkUsQ0FBZTdFLEVBQVV5QixFQUFXQyxHQUNwQzhDLEVBQWtCdEksVUFHcEJzRixFQUFpQmhHLGlCQUFpQixRQUFTbUosRUFBc0J6SSxNQUVqRXFFLEVBQUl1RSxxQkFBcUJwRyxNQUFLLFNBQUNxRyxHQUM3Qi9FLEVBQVNnRixZQUFZRCxHQUVyQlQsRUFBUVcsWUFBWTFDLE9BQU0sU0FBQ0MsR0FDekJDLFFBQVFDLE1BQU0sZ0NBQWlDRixTQUVoREQsT0FBTSxTQUFBQyxHQUNQQyxRQUFRQyxNQUFNLGdEQUFpREYsTyIsImZpbGUiOiJhcHAuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGFsbENsYXNzZXMsIHBhcmVudFNlbGVjdG9yKSB7XG4gICAgdGhpcy5hbGxDbGFzc2VzID0gYWxsQ2xhc3NlcztcbiAgICB0aGlzLmZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3BhcmVudFNlbGVjdG9yfSBmb3JtYCk7XG4gICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihhbGxDbGFzc2VzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLmlucHV0cyA9IEFycmF5LmZyb20odGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5hbGxDbGFzc2VzLmlucHV0Q29udGFpbmVyU2VsZWN0b3IpKTtcbiAgICB0aGlzLmVuYWJsZVZhbGlkYXRpb25zID0gdGhpcy5lbmFibGVWYWxpZGF0aW9ucy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX3ZhbGlkYXRlSW5wdXQoaW5wdXQsIGVycm9yRWxlbWVudCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBlcnJvckVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlcnJvckVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihlcnJvckVsZW1lbnQpIHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dFNlbGVjdG9yKVxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXQucXVlcnlTZWxlY3Rvcih0aGlzLmFsbENsYXNzZXMuaW5wdXRFcnJvclNlbGVjdG9yKTtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXQoZS50YXJnZXQsIGVycm9yRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgY2xlYXJFcnJvcnMoKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dEVycm9yU2VsZWN0b3IpKSk7XG4gIH1cblxuICB0b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5mb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb25zKCkge1xuICAgIHRoaXMuX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMoKTtcbiAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gIH1cbn1cbiIsImNvbnN0IEVTQ0FQRV9LRVlDT0RFID0gMjc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuXG4gICAgaWYgKHRoaXMuc3VibWl0QnV0dG9uKSB7XG4gICAgICB0aGlzLmRlZmF1bHRTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IEVTQ0FQRV9LRVlDT0RFKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjbG9zZUljb24gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtaWNvbicpO1xuICAgIGNsb3NlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpO1xuICAgIHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVN1Ym1pdEJ1dHRvblRleHQodGV4dCkge1xuICAgIGlmICh0aGlzLnN1Ym1pdEJ1dHRvbikge1xuICAgICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0U3VibWl0QnV0dG9uVGV4dCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN1Ym1pdEJ1dHRvblRleHQodGhpcy5kZWZhdWx0U3VibWl0QnV0dG9uVGV4dClcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIG9wZW4oZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICBjb25zdCBjYXJkID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCdpbWcnKTtcbiAgICBjYXJkLnNyYyA9IGUudGFyZ2V0LnNyYztcbiAgICBjYXJkLmFsdCA9IGUudGFyZ2V0LmFsdDtcbiAgICBjb25zdCBwYXJlbnQgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZCcpO1xuICAgIGNvbnN0IHN1YnRpdGxlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1uYW1lJyk7XG4gICAgdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHQnKS50ZXh0Q29udGVudCA9IHN1YnRpdGxlLnRleHRDb250ZW50O1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvciwgc3VibWl0Rm9ybUhhbmRsZXIsIHZhbGlkYXRvcikge1xuICAgIHN1cGVyKHNlbGVjdG9yLCB2YWxpZGF0b3IpO1xuICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIgPSBzdWJtaXRGb3JtSGFuZGxlcjtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB2YWx1ZXNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy52YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbnMoKTtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3VibWl0QnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKTtcbiAgICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIoZSwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMucmVzZXRTdWJtaXRCdXR0b25UZXh0KCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy52YWxpZGF0b3IuY2xlYXJFcnJvcnMoKTtcbiAgICB0aGlzLnZhbGlkYXRvci50b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcbiAgfVxuXG4gIG9wZW4ob25TdWJtaXQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5zdWJtaXRGb3JtSGFuZGxlciA9IG9uU3VibWl0O1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArICdjYXJkcy8nLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBnZXRJbmZvQWJvdXRQZW9wbGUoKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArICd1c2Vycy9tZS8nLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVFZGl0UHJvZmlsZShwcm9maWxlRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICd1c2Vycy9tZS8nLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocHJvZmlsZURhdGEpLFxuICAgICAgfSxcbiAgICApLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVFZGl0QXZhdGFyKGF2YXRhclVybCkge1xuICAgIHJldHVybiBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICd1c2Vycy9tZS9hdmF0YXInLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KSxcbiAgICAgIH0sXG4gICAgKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkTmV30KFhcmQoY2FyZERhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAnY2FyZHMnLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YSksXG4gICAgICB9LFxuICAgICkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ2NhcmRzLycgKyBjYXJkSWQsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgdXBkYXRlTGlrZShjYXJkSWQsIGlzRGVsZXRlKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogaXNEZWxldGUgPyAnREVMRVRFJyA6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICB9LFxuICAgICkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGZvdG9TZWxlY3RvciwgaGFuZGxlQ2xpY2ssIGZvdG9JbnB1dFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLnByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLnByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5mb3RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3RvU2VsZWN0b3IpO1xuICAgIHRoaXMuZm90b0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3RvSW5wdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5oYW5kbGVDbGljayA9IGhhbmRsZUNsaWNrO1xuICB9XG5cbiAgX3VwZGF0ZVVzZXJJbmZvT25QYWdlKCkge1xuICAgIHRoaXMucHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy51c2VySW5mby5uYW1lO1xuICAgIHRoaXMucHJvZmlsZVN1YnRpdGxlLnRleHRDb250ZW50ID0gdGhpcy51c2VySW5mby5hYm91dDtcbiAgICB0aGlzLmZvdG9JbnB1dC52YWx1ZSA9IHRoaXMudXNlckluZm8uYXZhdGFyO1xuICAgIHRoaXMuZm90b0NvbnRhaW5lci5zcmMgPSB0aGlzLnVzZXJJbmZvLmF2YXRhcjtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHVzZXJJbmZvKSB7XG4gICAgdGhpcy51c2VySW5mbyA9IHVzZXJJbmZvO1xuICAgIHRoaXMuX3VwZGF0ZVVzZXJJbmZvT25QYWdlKCk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy51c2VySW5mbztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZm90b0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICB0aGlzLl91cGRhdGVVc2VySW5mb09uUGFnZSgpO1xuICAgICAgdGhpcy5oYW5kbGVDbGljayhlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZU5hbWVBbmRKb2IoeyBuYW1lLCBqb2IgfSkge1xuICAgIHRoaXMudXNlckluZm8ubmFtZSA9IG5hbWU7XG4gICAgdGhpcy51c2VySW5mby5hYm91dCA9IGpvYjtcbiAgICB0aGlzLl91cGRhdGVVc2VySW5mb09uUGFnZSgpO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyVXJsKHVybCkge1xuICAgIHRoaXMudXNlckluZm8uYXZhdGFyID0gdXJsO1xuICAgIHRoaXMuX3VwZGF0ZVVzZXJJbmZvT25QYWdlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBhcGksIHJlbmRlcmVyLCB1c2VySW5mbyB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuYXBpID0gYXBpO1xuICAgIHRoaXMudXNlckluZm8gPSB1c2VySW5mbztcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxuXG4gIGluaXRDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbihjYXJkcyA9PiB7XG4gICAgICB0aGlzLml0ZW1zID0gY2FyZHM7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdGhpcy51c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgcmVuZGVyZWRJdGVtID0gdGhpcy5yZW5kZXJlcihpdGVtLCBjdXJyZW50VXNlcik7XG4gICAgICB0aGlzLmFkZEl0ZW0ocmVuZGVyZWRJdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBhbGxDbGFzc2VzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIGlucHV0Q29udGFpbmVyU2VsZWN0b3I6ICcucG9wdXBfX25hbWUtY29udGFpbmVyJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fbmFtZScsXG4gIGlucHV0RXJyb3JTZWxlY3RvcjogJy5wb3B1cF9fbmFtZS5wb3B1cF9fbmFtZV90eXBlX2VycicsXG4gIGRpc2FibGVkQnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2NvbnRhaW5lcl9uZXctY2FyZCAucG9wdXBfX2J1dHRvbicsXG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19pbmZvLXRpdGxlJyxcbiAgZm90b0NvbnRhaW5lcjogJy5wcm9maWxlX19mb3RvJyxcbiAgYWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19pbmZvLXN1YnRpdGxlJyxcbn07XG5cbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHRyYXNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJyk7XG5leHBvcnQgY29uc3QgbmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWxsQ2xhc3Nlcy5uYW1lU2VsZWN0b3IpO1xuZXhwb3J0IGNvbnN0IGFib3V0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2luZm8tc3VidGl0bGUnKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pvYicpOyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgYXBpLFxuICAgIHsgbmFtZSwgbGluaywgbGlrZXMsIGlkLCBvd25lciB9LFxuICAgIGN1cnJlbnRVc2VyLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICApIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgdGhpcy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuXG4gICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICB9XG5cbiAgLyoqINCf0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgX2FkZExpa2UoZSkge1xuICAgIGNvbnN0IGxpa2VDb250YWluZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbGlrZScpO1xuICAgIGNvbnN0IGxpa2VDb3VudENvbnRhaW5lciA9IGxpa2VDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24tbGlrZScpO1xuXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5hcGkudXBkYXRlTGlrZSh0aGlzLmlkLCB0cnVlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ21lc3RvLWNhcmRfX3N1YnRpdGxlLWljb25fYWN0aXZlJyk7XG4gICAgICAgIGxpa2VDb3VudENvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINGD0LHRgNCw0YLRjCDQu9Cw0LnQuicsIGVycik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcGkudXBkYXRlTGlrZSh0aGlzLmlkKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ21lc3RvLWNhcmRfX3N1YnRpdGxlLWljb25fYWN0aXZlJyk7XG4gICAgICAgIGxpa2VDb3VudENvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC00L7QsdCw0LLQuNGC0Ywg0LvQsNC50LonLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX2RlbGV0ZUNhcmQoZSkge1xuICAgIGNvbnN0IGNhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZCcpO1xuXG4gICAgdGhpcy5hcGkuZGVsZXRlQ2FyZCh0aGlzLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0YPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRgycsIGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9vbkRlbGV0ZUJ1dHRvbkNsaWNrKGUpIHtcbiAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrKCgpID0+IHsgdGhpcy5fZGVsZXRlQ2FyZChlKTsgfSk7XG4gIH1cblxuICBfc2hvd1Bob3RvKGUpIHtcbiAgICB0aGlzLmhhbmRsZUNhcmRDbGljayhlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMobmV3Q2FyZCkge1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9hZGRMaWtlKGUpKTtcbiAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX190cmFzaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX29uRGVsZXRlQnV0dG9uQ2xpY2soZSkpO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3Bob3RvJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5fc2hvd1Bob3RvKGUpKTtcbiAgfVxuXG4gIF9zaG93VHJhc2gobmV3Q2FyZCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyLl9pZCA9PT0gdGhpcy5vd25lci5faWQpIHtcbiAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgIH1cbiAgfVxuXG4gIF9zaG93SXNMaWtlZChuZXdDYXJkKSB7XG4gICAgY29uc3QgbXlMaWtlID0gdGhpcy5saWtlcy5maW5kKChlbHQpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGVsdC5faWQgPT09IHRoaXMuY3VycmVudFVzZXIuX2lkO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgICBpZiAobXlMaWtlKSB7XG4gICAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uJykuY2xhc3NMaXN0LmFkZCgnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVNZXN0b0NhcmQoKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgbWVzdG8gPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19waG90bycpO1xuICAgIGNvbnN0IGxpa2UgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uLWxpa2UnKTtcbiAgICBtZXN0by5zcmMgPSB0aGlzLmxpbms7XG4gICAgbWVzdG8uYWx0ID0gdGhpcy5uYW1lO1xuICAgIGxpa2UudGV4dENvbnRlbnQgPSB0aGlzLmxpa2VzLmxlbmd0aDtcbiAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX19zdWJ0aXRsZS1uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5fc2hvd1RyYXNoKG5ld0NhcmQpO1xuICAgIHRoaXMuX3Nob3dJc0xpa2VkKG5ld0NhcmQpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMobmV3Q2FyZCk7XG4gICAgcmV0dXJuIG5ld0NhcmQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmRzLmpzJztcbmltcG9ydCB7IHBvcHVwV2l0aEltYWdlLCBwb3B1cFN1Ym1pdCwgYXBpIH0gZnJvbSAnLi4vLi4vcGFnZXMvaW5kZXgnO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlcywgaWQsIG93bmVyLCBjdXJyZW50VXNlcikge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgYXBpLFxuICAgIHsgbmFtZSwgbGluaywgbGlrZXMsIGlkLCBvd25lciB9LFxuICAgIGN1cnJlbnRVc2VyLFxuICAgICcjbWVzdG8tY2FyZCcsXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbixcbiAgICBwb3B1cFN1Ym1pdC5vcGVuLFxuICApO1xuICByZXR1cm4gY2FyZC5jcmVhdGVNZXN0b0NhcmQoKTtcbn1cbiIsImltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoU3VibWl0IH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBhbGxDbGFzc2VzLFxuICBwcm9maWxlQnV0dG9uLFxuICBwcm9maWxlQnV0dG9uQWRkLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0LFxufSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBoYW5kbGVQcm9maWxlU3VibWl0LCBoYW5kbGVBZGRNZXN0b1N1Ym1pdCwgaGFuZGxlRWRpdEF2YXRhciB9IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvaGFuZGxlcnMuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZCB9IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyc7XG5cbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5jb25zdCBwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciA9IFwiLnBvcHVwLnBvcHVwX3R5cGVfdXBkYXRlXCI7XG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciwgaGFuZGxlRWRpdEF2YXRhciwgbmV3IEZvcm1WYWxpZGF0b3IoYWxsQ2xhc3NlcywgcG9wdXBFZGl0QXZhdGFyU2VsZWN0b3IpKTtcblxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBhbGxDbGFzc2VzLm5hbWVTZWxlY3RvcixcbiAgYWJvdXRTZWxlY3RvcjogYWxsQ2xhc3Nlcy5hYm91dFNlbGVjdG9yLFxuICBmb3RvU2VsZWN0b3I6IGFsbENsYXNzZXMuZm90b0NvbnRhaW5lcixcbiAgaGFuZGxlQ2xpY2s6IHBvcHVwRWRpdEF2YXRhci5vcGVuLFxuICBmb3RvSW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fbmFtZS5wb3B1cF9fbmFtZV90eXBlX3VwZGF0ZScsXG59KTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAucG9wdXBfdHlwZV9pbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwU3VibWl0ID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwLnBvcHVwX3R5cGVfY29uZmlybScpO1xuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTI2LycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnODIyNTZmMjUtMzY1Yy00NmFjLWFhMWYtYTg0NjEyOWY2ZDc3JyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIEdFVCwgREVMRVRFJyxcbiAgfVxufSk7XG5cbmNvbnN0IHJlbmRlcmVyID0gKHsgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyLCBfaWQgfSwgY3VycmVudFVzZXIpID0+IGNyZWF0ZUNhcmQobmFtZSwgbGluaywgbGlrZXMsIF9pZCwgb3duZXIsIGN1cnJlbnRVc2VyKTtcbmV4cG9ydCBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBhcGksIHJlbmRlcmVyLCB1c2VySW5mbyB9LCAnLmVsZW1lbnRzJyk7XG5cbmNvbnN0IHBvcHVwV2l0aFVzZXJGb3JtU2VsZWN0b3IgPSAnLnBvcHVwLnBvcHVwX3R5cGVfZWRpdCc7XG5jb25zdCBwb3B1cFdpdGhVc2VyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwV2l0aFVzZXJGb3JtU2VsZWN0b3IsIGhhbmRsZVByb2ZpbGVTdWJtaXQsIG5ldyBGb3JtVmFsaWRhdG9yKGFsbENsYXNzZXMsIHBvcHVwV2l0aFVzZXJGb3JtU2VsZWN0b3IpKTtcblxuY29uc3QgcG9wdXBXaXRoQWRkTWVzdG9Gb3JtU2VsZWN0b3IgPSAnLnBvcHVwLnBvcHVwX3R5cGVfbmV3LWNhcmQnXG5jb25zdCBwb3B1cFdpdGhBZGRNZXN0b0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cFdpdGhBZGRNZXN0b0Zvcm1TZWxlY3RvciwgaGFuZGxlQWRkTWVzdG9TdWJtaXQsIG5ldyBGb3JtVmFsaWRhdG9yKGFsbENsYXNzZXMsIHBvcHVwV2l0aEFkZE1lc3RvRm9ybVNlbGVjdG9yKSk7XG5cbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhVc2VyRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoQWRkTWVzdG9Gb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG51c2VySW5mby5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbywgbmFtZUlucHV0LCBqb2JJbnB1dCkge1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gYWJvdXQ7XG59XG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHNldElucHV0VmFsdWVzKHVzZXJJbmZvLCBuYW1lSW5wdXQsIGpvYklucHV0KTtcbiAgcG9wdXBXaXRoVXNlckZvcm0ub3BlbigpO1xufSk7XG5cbnByb2ZpbGVCdXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwb3B1cFdpdGhBZGRNZXN0b0Zvcm0ub3BlbilcblxuYXBpLmdldEluZm9BYm91dFBlb3BsZSgpLnRoZW4oKGluZm8pID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5mbyk7XG5cbiAgc2VjdGlvbi5pbml0Q2FyZHMoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcign0J3QtSDRg9C00LDQu9C+0YHRjCDQt9Cw0LPRgNGD0LfQuNGC0Ywg0LrQsNGA0YLQvtGH0LrQuCcsIGVycik7XG4gIH0pO1xufSkuY2F0Y2goZXJyID0+IHtcbiAgY29uc29sZS5lcnJvcign0J3QtSDRg9C00LDQu9C+0YHRjCDQv9C+0LvRg9GH0LjRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtScsIGVycik7XG59KTtcbiIsImltcG9ydCB7IGNyZWF0ZUNhcmQgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgdXNlckluZm8sIHNlY3Rpb24sIGFwaSB9IGZyb20gJy4uLy4uL3BhZ2VzL2luZGV4JztcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZXZ0LCB2YWx1ZXMsIG9uU3VjY2Vzcykge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBhcGkudXBkYXRlRWRpdFByb2ZpbGUoeyBuYW1lOiB2YWx1ZXMubmFtZSwgYWJvdXQ6IHZhbHVlcy5qb2IgfSkudGhlbigoeyBuYW1lLCBhYm91dDogam9iIH0pID0+IHtcbiAgICBvblN1Y2Nlc3MoKTtcbiAgICB1c2VySW5mby51cGRhdGVOYW1lQW5kSm9iKHsgbmFtZSwgam9iIH0pO1xuICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcign0J3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0L3QvtCy0LjRgtGMINC/0YDQvtGE0LjQu9GMJywgZXJyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVBZGRNZXN0b1N1Ym1pdChlLCB2YWx1ZXMsIG9uU3VjY2Vzcykge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHsgbWVzdG8sIGxpbmsgfSA9IHZhbHVlcztcblxuICBhcGkuYWRkTmV30KFhcmQoeyBuYW1lOiBtZXN0bywgbGluayB9KS50aGVuKCh7IG5hbWUsIG93bmVyLCBsaWtlcywgX2lkIH0pID0+IHtcbiAgICBvblN1Y2Nlc3MoKTtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmFtZSwgbGluaywgbGlrZXMsIF9pZCwgb3duZXIsIGN1cnJlbnRVc2VyKSk7XG4gIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINC00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDJywgZXJyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFZGl0QXZhdGFyKGUsIHZhbHVlcywgb25TdWNjZXNzKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBhcGkudXBkYXRlRWRpdEF2YXRhcih2YWx1ZXNbJ2xpbmstYXZhdGFyJ10pLnRoZW4oKHsgYXZhdGFyIH0pID0+IHtcbiAgICBvblN1Y2Nlc3MoKTtcbiAgICB1c2VySW5mby51cGRhdGVBdmF0YXJVcmwoYXZhdGFyKTtcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LUg0YPQtNCw0LvQvtGB0Ywg0L7QsdC90L7QstC40YLRjCDQsNCy0LDRgtCw0YAnLCBlcnIpO1xuICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=