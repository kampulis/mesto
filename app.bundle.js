(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.allClasses=e,this.form=n}var r,o;return r=t,(o=[{key:"_validateInput",value:function(e,t,n){e.validity.valid?this._hideInputError(t):(this._showInputError(e,t),this._disableButton(n)),this.form.checkValidity()&&(n.disabled=!1)}},{key:"_showInputError",value:function(e,t){t.textContent=e.validationMessage}},{key:"_disableButton",value:function(e){e.disabled=!0}},{key:"_hideInputError",value:function(e){e.textContent=""}},{key:"_addValidationsToInputs",value:function(e,t){var n=this;t.forEach((function(t){var r=t.querySelector(n.allClasses.inputSelector),o=t.querySelector(n.allClasses.inputErrorSelector);r.addEventListener("input",(function(t){n._validateInput(t.target,o,e)}))}))}},{key:"enableValidations",value:function(){var e=Array.from(this.form.querySelectorAll(this.allClasses.inputContainerSelector)),t=this.form.querySelector(this.allClasses.submitButtonSelector);this._addValidationsToInputs(t,e),n(this.allClasses)}}])&&e(r.prototype,o),t}();function n(e){Array.from(document.querySelectorAll(e.disabledButtonSelector)).forEach((function(e){e.disabled=!0}))}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.profileTitle=document.querySelector(n),this.profileSubtitle=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.profileTitle.textContent,about:this.profileSubtitle.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this.profileTitle.textContent=t,this.profileSubtitle.textContent=n}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.api,o=t.renderer,i=t.userInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=r,this.userInfo=i,this.renderer=o,this.container=document.querySelector(n),this.onSuccess=this.onSuccess.bind(this)}var t,n;return t=e,(n=[{key:"initCards",value:function(){this.api.getInitialCards(this.onSuccess)}},{key:"onSuccess",value:function(e){this.items=e,this.render()}},{key:"render",value:function(){var e=this,t=this.userInfo.getUserInfo();this.items.forEach((function(n){var r=e.renderer(n,t);e.addItem(r)}))}},{key:"addItem",value:function(e){this.container.prepend(e)}}])&&i(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popup=document.querySelector(t),this.submitButton=this.popup.querySelector('button[type="submit"]'),this.submitButton&&(this.defaultSubmitButtonText=this.submitButton.textContent),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){27===e.keyCode&&this.close()}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this.popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleClosePopupEsc),this.popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this.popup.querySelector(".popup__close-icon").addEventListener("click",this.close),this.popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}},{key:"updateSubmitButtonText",value:function(e){this.submitButton&&(this.submitButton.textContent=e)}},{key:"resetSubmitButtonText",value:function(){this.updateSubmitButtonText(this.defaultSubmitButtonText)}}])&&c(t.prototype,n),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(){return l(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){p(y(u.prototype),"open",this).call(this);var t=this.popup.querySelector("img");t.src=e.target.src,t.alt=e.target.alt;var n=e.target.closest(".mesto-card").querySelector(".mesto-card__subtitle-name");this.popup.querySelector(".popup__text").textContent=n.textContent}}])&&f(t.prototype,n),u}(a);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e)).submitFormHandler=t,n.form=n.popup.querySelector("form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this.form.querySelectorAll("input").forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;_(w(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){e.updateSubmitButtonText("Сохранение..."),e.submitFormHandler(t,e._getInputValues(),(function(){e.close(),e.resetSubmitButtonText()}))}))}},{key:"close",value:function(){_(w(u.prototype),"close",this).call(this),this.form.reset()}}])&&b(t.prototype,n),u}(a);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n,r,o,i,u){var c=n.name,a=n.link,s=n.likes,l=n.id,f=n.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=l,this.api=t,this.name=c,this.link=a,this.likes=s,this.owner=f,this.currentUser=r,this.template=document.querySelector(o),this.handleCardClick=i,this.handleDeleteClick=u}var t,n;return t=e,(n=[{key:"_addLike",value:function(e){var t=e.target.closest(".mesto-card__subtitle-like").querySelector(".mesto-card__subtitle-icon-like");e.target.classList.contains("mesto-card__subtitle-icon_active")?this.api.updateLike(this.id,(function(n){e.target.classList.remove("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length}),!0):this.api.updateLike(this.id,(function(n){e.target.classList.add("mesto-card__subtitle-icon_active"),t.textContent=n.likes.length}))}},{key:"_deleteCard",value:function(e){var t=e.target.closest(".mesto-card");this.api.deleteCard(this.id,(function(){t.remove()}))}},{key:"_onDeleteButtonClick",value:function(e){var t=this;this.handleDeleteClick((function(){t._deleteCard(e)}))}},{key:"_showPhoto",value:function(e){this.handleCardClick(e)}},{key:"_getTemplate",value:function(){return this.template.content.cloneNode(!0)}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".mesto-card__subtitle-icon").addEventListener("click",(function(e){return t._addLike(e)})),e.querySelector(".mesto-card__trash").addEventListener("click",(function(e){return t._onDeleteButtonClick(e)})),e.querySelector(".mesto-card__photo").addEventListener("click",(function(e){return t._showPhoto(e)}))}},{key:"_showTrash",value:function(e){this.currentUser.name===this.owner&&(e.querySelector(".mesto-card__trash").style.display="block")}},{key:"_showIsLiked",value:function(e){var t=this;this.likes.find((function(e){return e.name===t.currentUser.name}))&&e.querySelector(".mesto-card__subtitle-icon").classList.add("mesto-card__subtitle-icon_active")}},{key:"createMestoCard",value:function(){var e=this._getTemplate(),t=e.querySelector(".mesto-card__photo"),n=e.querySelector(".mesto-card__subtitle-icon-like");return t.src=this.link,t.alt=this.name,n.textContent=this.likes.length,e.querySelector(".mesto-card__subtitle-name").textContent=this.name,this._showTrash(e),this._showIsLiked(e),this._setEventListeners(e),e}}])&&E(t.prototype,n),e}();function j(e,t,n,r,o){return new C(W,{name:e,link:t,likes:n,id:r},o,"#mesto-card",J.open,K.open).createMestoCard()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).form=t.popup.querySelector("form"),t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;L(x(u.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(t){t.preventDefault(),e.submitFormHandler(),e.close()}))}},{key:"open",value:function(e){L(x(u.prototype),"open",this).call(this),this.submitFormHandler=e}}])&&P(t.prototype,n),u}(a);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(e){fetch(this.baseUrl+"cards",{headers:this.headers}).then((function(t){if(!t.ok)return Promise.reject("Ошибка: ".concat(t.status));t.json().then((function(t){return e(t)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"getInfoAboutPeople",value:function(e){fetch(this.baseUrl+"users/me/",{headers:this.headers}).then((function(t){if(!t.ok)return Promise.reject("Ошибка: ".concat(t.status));t.json().then((function(t){return e(t)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateEditProfile",value:function(e,t){fetch(this.baseUrl+"users/me/",{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));t()})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateEditAvatar",value:function(e,t){fetch(this.baseUrl+"users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(n){if(!n.ok)return Promise.reject("Ошибка: ".concat(n.status));t(e)})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"addNewСard",value:function(e,t){fetch(this.baseUrl+"cards",{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"deleteCard",value:function(e,t){fetch(this.baseUrl+"cards/"+e,{method:"DELETE",headers:this.headers}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}},{key:"updateLike",value:function(e,t,n){fetch(this.baseUrl+"cards/likes/"+e,{method:n?"DELETE":"PUT",headers:this.headers}).then((function(e){if(!e.ok)return Promise.reject("Ошибка: ".concat(e.status));e.json().then((function(e){t(e)}))})).catch((function(e){return Promise.reject("Ошибка: ".concat(e))}))}}])&&R(t.prototype,n),e}(),U={formSelector:".popup__input",submitButtonSelector:".popup__button",inputContainerSelector:".popup__name-container",inputSelector:".popup__name",inputErrorSelector:".popup__name.popup__name_type_err",disabledButtonSelector:".popup__container_new-card .popup__button",nameSelector:".profile__info-title"},A=document.querySelector(".profile").querySelector(".profile__button"),D=document.querySelector(".profile__button-add"),V=(document.querySelector(".mesto-card__trash"),document.querySelector(U.nameSelector)),H=document.querySelector(".profile__info-subtitle"),N=document.querySelector(".profile__foto"),F=Array.from(document.querySelectorAll(U.formSelector)),M=new o({nameSelector:U.nameSelector,aboutSelector:".profile__info-subtitle"}),J=new m(".popup.popup_type_image"),z=new g(".popup.popup_type_edit",(function(e,t,n){e.preventDefault();var r=t.name,o=t.job;M.setUserInfo({name:r,job:o}),W.updateEditProfile({name:r,about:o},n)}),M),G=new g(".popup.popup_type_new-card",(function(e,t,r){e.preventDefault();var o=t.mesto,i=t.link;W["addNewСard"]({name:o,link:i},(function(e){var t=e.name,o=e.owner,u=e.likes,c=e._id;r();var a=M.getUserInfo().name===o.name;X.addItem(j(t,i,u,c,a)),n(U)}))}),M),K=new I(".popup.popup_type_confirm"),Q=(document.querySelector(".popup_type_new-card"),new g(".popup.popup_type_update",(function(e,t,n){e.preventDefault();var r=t.link;W.updateEditAvatar(r,(function(e){n(),N.src=e}))}))),W=new B({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"82256f25-365c-46ac-aa1f-a846129f6d77","Content-Type":"application/json","Access-Control-Allow-Methods":"POST, GET, DELETE"}}),X=new u({api:W,renderer:function(e,t){return j(e.name,e.link,e.likes,e._id,t)},userInfo:M},".elements");function Y(e){var t=document.querySelector("#name"),n=document.querySelector("#job"),r=e.getUserInfo(),o=r.name,i=r.about;t.value=o,n.value=i}F.forEach((function(e){new t(U,e).enableValidations()})),J.setEventListeners(),z.setEventListeners(),G.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),A.addEventListener("click",(function(){z.open(),Y(M)})),N.addEventListener("click",(function(){Q.open(),Y(M)})),D.addEventListener("click",G.open),W.getInfoAboutPeople((function(e){V.textContent=e.name,H.textContent=e.about,N.src=e.avatar,X.initCards()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2hhbmRsZXJzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJhbGxDbGFzc2VzIiwiZm9ybSIsInRoaXMiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsImZvcm1CdXR0b24iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2Rpc2FibGVCdXR0b24iLCJjaGVja1ZhbGlkaXR5IiwiZGlzYWJsZWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYnV0dG9uIiwiZm9ybUlucHV0cyIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0RXJyb3JTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiX3ZhbGlkYXRlSW5wdXQiLCJ0YXJnZXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRDb250YWluZXJTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2FkZFZhbGlkYXRpb25zVG9JbnB1dHMiLCJkaXNhYmxlU3VibWl0QnV0dG9ucyIsImRvY3VtZW50IiwiZGlzYWJsZWRCdXR0b25TZWxlY3RvciIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsIm5hbWUiLCJhYm91dCIsImpvYiIsIlNlY3Rpb24iLCJzZWxlY3RvciIsImFwaSIsInJlbmRlcmVyIiwidXNlckluZm8iLCJjb250YWluZXIiLCJvblN1Y2Nlc3MiLCJiaW5kIiwiZ2V0SW5pdGlhbENhcmRzIiwiZGF0YSIsIml0ZW1zIiwicmVuZGVyIiwiY3VycmVudFVzZXIiLCJnZXRVc2VySW5mbyIsIml0ZW0iLCJyZW5kZXJlZEl0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwIiwic3VibWl0QnV0dG9uIiwiZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQiLCJvcGVuIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJrZXlDb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbG9zZVBvcHVwRXNjIiwicmVtb3ZlIiwiY29udGFpbnMiLCJ0ZXh0IiwidXBkYXRlU3VibWl0QnV0dG9uVGV4dCIsIlBvcHVwV2l0aEltYWdlIiwiY2FyZCIsInNyYyIsImFsdCIsInN1YnRpdGxlIiwiY2xvc2VzdCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtSGFuZGxlciIsInZhbHVlcyIsImlkIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldFN1Ym1pdEJ1dHRvblRleHQiLCJyZXNldCIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJsaW5rIiwibGlrZXMiLCJvd25lciIsInRlbXBsYXRlIiwibGlrZUNvdW50Q29udGFpbmVyIiwidXBkYXRlTGlrZSIsImxlbmd0aCIsImRlbGV0ZUNhcmQiLCJfZGVsZXRlQ2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJuZXdDYXJkIiwiX2FkZExpa2UiLCJfb25EZWxldGVCdXR0b25DbGljayIsIl9zaG93UGhvdG8iLCJzdHlsZSIsImRpc3BsYXkiLCJmaW5kIiwiZWx0IiwiX2dldFRlbXBsYXRlIiwibWVzdG8iLCJsaWtlIiwiX3Nob3dUcmFzaCIsIl9zaG93SXNMaWtlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwU3VibWl0IiwiY3JlYXRlTWVzdG9DYXJkIiwiUG9wdXBXaXRoU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJvblN1Ym1pdCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwianNvbiIsImNhdGNoIiwiZXJyIiwicHJvZmlsZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhclVybCIsImF2YXRhciIsImNhcmREYXRhIiwiY2FyZElkIiwiaXNEZWxldGUiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlQnV0dG9uIiwicHJvZmlsZUJ1dHRvbkFkZCIsIm5hbWVDb250YWluZXIiLCJhYm91dENvbnRhaW5lciIsImZvdG9Db250YWluZXIiLCJmb3JtcyIsInBvcHVwV2l0aFVzZXJGb3JtIiwiZXZ0IiwicG9wdXBXaXRoQWRkTWVzdG9Gb3JtIiwiX2lkIiwiaXNPd25lciIsInNlY3Rpb24iLCJwb3B1cEVkaXRBdmF0YXIiLCJhdXRob3JpemF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImVuYWJsZVZhbGlkYXRpb25zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRJbmZvQWJvdXRQZW9wbGUiXSwibWFwcGluZ3MiOiJ5TEFFTyxJQUFNQSxFQUFiLFdBQ0UsV0FBWUMsRUFBWUMsSSw0RkFBTSxTQUM1QkMsS0FBS0YsV0FBYUEsRUFDbEJFLEtBQUtELEtBQU9BLEUsUUFIaEIsTyxFQUFBLEcsRUFBQSw2QkFNRSxTQUFlRSxFQUFPQyxFQUFjQyxHQUM3QkYsRUFBTUcsU0FBU0MsTUFJbEJMLEtBQUtNLGdCQUFnQkosSUFIckJGLEtBQUtPLGdCQUFnQk4sRUFBT0MsR0FDNUJGLEtBQUtRLGVBQWVMLElBSWxCSCxLQUFLRCxLQUFLVSxrQkFDWk4sRUFBV08sVUFBVyxLQWQ1Qiw2QkFrQkUsU0FBZ0JULEVBQU9DLEdBQ3JCQSxFQUFhUyxZQUFjVixFQUFNVyxvQkFuQnJDLDRCQXNCRSxTQUFlQyxHQUNiQSxFQUFPSCxVQUFXLElBdkJ0Qiw2QkEwQkUsU0FBZ0JSLEdBQ2RBLEVBQWFTLFlBQWMsS0EzQi9CLHFDQThCRSxTQUF3QlIsRUFBWVcsR0FBWSxXQUM5Q0EsRUFBV0MsU0FBUSxTQUFBZCxHQUNqQixJQUFNZSxFQUFlZixFQUFNZ0IsY0FBYyxFQUFLbkIsV0FBV29CLGVBQ25EaEIsRUFBZUQsRUFBTWdCLGNBQWMsRUFBS25CLFdBQVdxQixvQkFDekRILEVBQWFJLGlCQUFpQixTQUFTLFNBQUNDLEdBQ3RDLEVBQUtDLGVBQWVELEVBQUVFLE9BQVFyQixFQUFjQyxXQW5DcEQsK0JBd0NFLFdBQ0UsSUFBTVcsRUFBYVUsTUFBTUMsS0FBS3pCLEtBQUtELEtBQUsyQixpQkFBaUIxQixLQUFLRixXQUFXNkIseUJBQ25FeEIsRUFBYUgsS0FBS0QsS0FBS2tCLGNBQWNqQixLQUFLRixXQUFXOEIsc0JBRTNENUIsS0FBSzZCLHdCQUF3QjFCLEVBQVlXLEdBQ3pDZ0IsRUFBcUI5QixLQUFLRixp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Q0FDLFNBTGUsU0FBQyxFQUE0QlMsR0FBN0IsT0FBNkNrRSxFQUE3QyxFQUFHakYsS0FBSCxFQUFTd0QsS0FBVCxFQUFlQyxNQUFmLEVBQXNCZ0UsSUFBMEQxRyxJQU0vRlIsWUFDQyxhRW5DSCxTQUFTdUgsRUFBZXZILEdBQ3RCLElBQU13SCxFQUFZdEksU0FBU2QsY0FBYyxTQUNuQ3FKLEVBQVd2SSxTQUFTZCxjQUFjLFFBQ3hDLEVBQXdCNEIsRUFBU1MsY0FBekJoQixFQUFSLEVBQVFBLEtBQU1DLEVBQWQsRUFBY0EsTUFFZDhILEVBQVUvRSxNQUFRaEQsRUFDbEJnSSxFQUFTaEYsTUFBUS9DLEVBR25Cb0gsV0FBYyxTQUFVNUosR0FDQSxJQUFJRixFQUFjQyxFQUFZQyxHQUN0Q3dLLHVCQUdoQi9DLEVBQWVnRCxvQkFDZlosRUFBa0JZLG9CQUNsQlYsRUFBc0JVLG9CQUN0Qi9DLEVBQVkrQyxvQkFDWk4sRUFBZ0JNLG9CQUVoQmxCLEVBQWNsSSxpQkFBaUIsU0FBUyxXQUN0Q3dJLFNBQ0FRLEVBQWV2SCxNQUlqQjZHLEVBQWN0SSxpQkFBaUIsU0FBUyxXQUN0QzhJLFNBQ0FFLEVBQWV2SCxNQUlqQjBHLEVBQWlCbkksaUJBQWlCLFFBQVMwSSxFQUFzQjlGLE1BRWpFckIsRUFBSThILG9CQUFtQixTQUFDdkgsR0FDdEJzRyxjQUE0QnRHLEVBQUtaLEtBQ2pDbUgsY0FBNkJ2RyxFQUFLWCxNQUNsQ21ILE1BQW9CeEcsRUFBSytGLE9BRXpCZ0Isa0IiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGFsbENsYXNzZXMsIGZvcm0pIHtcbiAgICB0aGlzLmFsbENsYXNzZXMgPSBhbGxDbGFzc2VzO1xuICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gIH1cblxuICBfdmFsaWRhdGVJbnB1dChpbnB1dCwgZXJyb3JFbGVtZW50LCBmb3JtQnV0dG9uKSB7XG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yRWxlbWVudCk7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKGZvcm1CdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlcnJvckVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5mb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgZm9ybUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JFbGVtZW50KSB7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbihidXR0b24pIHtcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfYWRkVmFsaWRhdGlvbnNUb0lucHV0cyhmb3JtQnV0dG9uLCBmb3JtSW5wdXRzKSB7XG4gICAgZm9ybUlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0LnF1ZXJ5U2VsZWN0b3IodGhpcy5hbGxDbGFzc2VzLmlucHV0U2VsZWN0b3IpXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dC5xdWVyeVNlbGVjdG9yKHRoaXMuYWxsQ2xhc3Nlcy5pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVJbnB1dChlLnRhcmdldCwgZXJyb3JFbGVtZW50LCBmb3JtQnV0dG9uKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9ucygpIHtcbiAgICBjb25zdCBmb3JtSW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLmFsbENsYXNzZXMuaW5wdXRDb250YWluZXJTZWxlY3RvcikpO1xuICAgIGNvbnN0IGZvcm1CdXR0b24gPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLmFsbENsYXNzZXMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fYWRkVmFsaWRhdGlvbnNUb0lucHV0cyhmb3JtQnV0dG9uLCBmb3JtSW5wdXRzKTtcbiAgICBkaXNhYmxlU3VibWl0QnV0dG9ucyh0aGlzLmFsbENsYXNzZXMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlU3VibWl0QnV0dG9ucyhhbGxDbGFzc2VzKSB7XG4gIGNvbnN0IGRpc2FibGVkQnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhbGxDbGFzc2VzLmRpc2FibGVkQnV0dG9uU2VsZWN0b3IpKTtcbiAgZGlzYWJsZWRCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRGb3Jtc0Vycm9ycyhmb3JtcywgYWxsQ2xhc3Nlcykge1xuICBmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChhbGxDbGFzc2VzLmlucHV0RXJyb3JTZWxlY3Rvcik7XG4gICAgZXJyb3JFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCIpO1xuICB9KVxufVxuXG5cblxuXG5cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLnByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLnByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5wcm9maWxlVGl0bGUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5wcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcbiAgICB0aGlzLnByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5wcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgYXBpLCByZW5kZXJlciwgdXNlckluZm8gfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICB0aGlzLnVzZXJJbmZvID0gdXNlckluZm87XG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5vblN1Y2Nlc3MgPSB0aGlzLm9uU3VjY2Vzcy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaW5pdENhcmRzKCkge1xuICAgIHRoaXMuYXBpLmdldEluaXRpYWxDYXJkcyh0aGlzLm9uU3VjY2Vzcyk7XG4gIH1cblxuICBvblN1Y2Nlc3MoZGF0YSkge1xuICAgIHRoaXMuaXRlbXMgPSBkYXRhO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB0aGlzLnVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCByZW5kZXJlZEl0ZW0gPSB0aGlzLnJlbmRlcmVyKGl0ZW0sIGN1cnJlbnRVc2VyKTtcbiAgICAgIHRoaXMuYWRkSXRlbShyZW5kZXJlZEl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiY29uc3QgRVNDQVBFX0tFWUNPREUgPSAyNztcblxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICB0aGlzLnBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG5cbiAgICBpZiAodGhpcy5zdWJtaXRCdXR0b24pIHtcbiAgICAgIHRoaXMuZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICB9XG5cbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVDbG9zZVBvcHVwRXNjKTtcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VJY29uID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWljb24nKTtcbiAgICBjbG9zZUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcbiAgICB0aGlzLnBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcbiAgICBpZiAodGhpcy5zdWJtaXRCdXR0b24pIHtcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gIH1cblxuICByZXNldFN1Ym1pdEJ1dHRvblRleHQoKSB7XG4gICAgdGhpcy51cGRhdGVTdWJtaXRCdXR0b25UZXh0KHRoaXMuZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQpXG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKGUpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgY2FyZC5zcmMgPSBlLnRhcmdldC5zcmM7XG4gICAgY2FyZC5hbHQgPSBlLnRhcmdldC5hbHQ7XG4gICAgY29uc3QgcGFyZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLm1lc3RvLWNhcmQnKTtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbmFtZScpO1xuICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0JykudGV4dENvbnRlbnQgPSBzdWJ0aXRsZS50ZXh0Q29udGVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHN1Ym1pdEZvcm1IYW5kbGVyKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuc3VibWl0Rm9ybUhhbmRsZXIgPSBzdWJtaXRGb3JtSGFuZGxlcjtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB2YWx1ZXNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN1Ym1pdEJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gICAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyKGUsIHRoaXMuX2dldElucHV0VmFsdWVzKCksICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLnJlc2V0U3VibWl0QnV0dG9uVGV4dCgpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgYXBpLFxuICAgIHsgbmFtZSwgbGluaywgbGlrZXMsIGlkLCBvd25lciB9LFxuICAgIGN1cnJlbnRVc2VyLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICApIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgdGhpcy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuXG4gICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICB9XG5cbiAgLyoqINCf0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICovXG5cbiAgX2FkZExpa2UoZSkge1xuICAgIGNvbnN0IGxpa2VDb250YWluZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbGlrZScpO1xuICAgIGNvbnN0IGxpa2VDb3VudENvbnRhaW5lciA9IGxpa2VDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3N1YnRpdGxlLWljb24tbGlrZScpO1xuXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbl9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5hcGkudXBkYXRlTGlrZSh0aGlzLmlkLCAoZGF0YSkgPT4ge1xuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdtZXN0by1jYXJkX19zdWJ0aXRsZS1pY29uX2FjdGl2ZScpO1xuICAgICAgICBsaWtlQ291bnRDb250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgIH0sIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwaS51cGRhdGVMaWtlKHRoaXMuaWQsIChkYXRhKSA9PiB7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ21lc3RvLWNhcmRfX3N1YnRpdGxlLWljb25fYWN0aXZlJyk7XG4gICAgICAgIGxpa2VDb3VudENvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX2RlbGV0ZUNhcmQoZSkge1xuICAgIGNvbnN0IGNhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcubWVzdG8tY2FyZCcpO1xuXG4gICAgdGhpcy5hcGkuZGVsZXRlQ2FyZCh0aGlzLmlkLCAoKSA9PiB7XG4gICAgICBjYXJkLnJlbW92ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgX29uRGVsZXRlQnV0dG9uQ2xpY2soZSkge1xuICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2soKCkgPT4geyB0aGlzLl9kZWxldGVDYXJkKGUpOyB9KTtcbiAgfVxuXG4gIF9zaG93UGhvdG8oZSkge1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrKGUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhuZXdDYXJkKSB7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX2FkZExpa2UoZSkpO1xuICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLm1lc3RvLWNhcmRfX3RyYXNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5fb25EZWxldGVCdXR0b25DbGljayhlKSk7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fcGhvdG8nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9zaG93UGhvdG8oZSkpO1xuICB9XG5cbiAgX3Nob3dUcmFzaChuZXdDYXJkKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFVzZXIubmFtZSA9PT0gdGhpcy5vd25lcikge1xuICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fdHJhc2gnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgfVxuICB9XG5cbiAgX3Nob3dJc0xpa2VkKG5ld0NhcmQpIHtcbiAgICBjb25zdCBteUxpa2UgPSB0aGlzLmxpa2VzLmZpbmQoKGVsdCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZWx0Lm5hbWUgPT09IHRoaXMuY3VycmVudFVzZXIubmFtZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG4gICAgaWYgKG15TGlrZSkge1xuICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbicpLmNsYXNzTGlzdC5hZGQoJ21lc3RvLWNhcmRfX3N1YnRpdGxlLWljb25fYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlTWVzdG9DYXJkKCkge1xuICAgIGNvbnN0IG5ld0NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIGNvbnN0IG1lc3RvID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fcGhvdG8nKTtcbiAgICBjb25zdCBsaWtlID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtaWNvbi1saWtlJyk7XG4gICAgbWVzdG8uc3JjID0gdGhpcy5saW5rO1xuICAgIG1lc3RvLmFsdCA9IHRoaXMubmFtZTtcbiAgICBsaWtlLnRleHRDb250ZW50ID0gdGhpcy5saWtlcy5sZW5ndGg7XG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcubWVzdG8tY2FyZF9fc3VidGl0bGUtbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX3Nob3dUcmFzaChuZXdDYXJkKTtcbiAgICB0aGlzLl9zaG93SXNMaWtlZChuZXdDYXJkKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKG5ld0NhcmQpO1xuICAgIHJldHVybiBuZXdDYXJkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vQ2FyZHMuanMnO1xuaW1wb3J0IHsgcG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBwb3B1cFN1Ym1pdCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGFwaSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQobmFtZSwgbGluaywgbGlrZXMsIGlkLCBjdXJyZW50VXNlcikge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgYXBpLFxuICAgIHsgbmFtZSwgbGluaywgbGlrZXMsIGlkIH0sXG4gICAgY3VycmVudFVzZXIsXG4gICAgJyNtZXN0by1jYXJkJyxcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuLFxuICAgIHBvcHVwU3VibWl0Lm9wZW4sXG4gICk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZU1lc3RvQ2FyZCgpO1xufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnN1Ym1pdEZvcm1IYW5kbGVyKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcbiAgfVxuXG4gIG9wZW4ob25TdWJtaXQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5zdWJtaXRGb3JtSGFuZGxlciA9IG9uU3VibWl0O1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMob25TdWNjZXNzKSB7XG4gICAgZmV0Y2godGhpcy5iYXNlVXJsICsgJ2NhcmRzJywgeyBoZWFkZXJzOiB0aGlzLmhlYWRlcnMgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJlcy5qc29uKCkudGhlbihkYXRhID0+IG9uU3VjY2VzcyhkYXRhKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5mb0Fib3V0UGVvcGxlKG9uU3VjY2Vzcykge1xuICAgIGZldGNoKHRoaXMuYmFzZVVybCArICd1c2Vycy9tZS8nLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmVzLmpzb24oKS50aGVuKGRhdGEgPT4gb25TdWNjZXNzKGRhdGEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cblxuICB1cGRhdGVFZGl0UHJvZmlsZShwcm9maWxlRGF0YSwgb25TdWNjZXNzKSB7XG4gICAgZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAndXNlcnMvbWUvJyxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2ZpbGVEYXRhKSxcbiAgICAgIH0sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgb25TdWNjZXNzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUVkaXRBdmF0YXIoYXZhdGFyVXJsLCBvblN1Y2Nlc3MpIHtcbiAgICBmZXRjaChcbiAgICAgIHRoaXMuYmFzZVVybCArICd1c2Vycy9tZS9hdmF0YXInLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KSxcbiAgICAgIH0sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgb25TdWNjZXNzKGF2YXRhclVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgYWRkTmV30KFhcmQoY2FyZERhdGEsIG9uU3VjY2Vzcykge1xuICAgIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ2NhcmRzJyxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpLFxuICAgICAgfSxcbiAgICApLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXMuanNvbigpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgb25TdWNjZXNzKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQsIG9uU3VjY2Vzcykge1xuICAgIGZldGNoKFxuICAgICAgdGhpcy5iYXNlVXJsICsgJ2NhcmRzLycgKyBjYXJkSWQsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmVzLmpzb24oKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIG9uU3VjY2VzcyhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUxpa2UoY2FyZElkLCBvblN1Y2Nlc3MsIGlzRGVsZXRlKSB7XG4gICAgZmV0Y2goXG4gICAgICB0aGlzLmJhc2VVcmwgKyAnY2FyZHMvbGlrZXMvJyArIGNhcmRJZCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBpc0RlbGV0ZSA/ICdERUxFVEUnIDogJ1BVVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmVzLmpzb24oKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIG9uU3VjY2VzcyhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vU2VjdGlvbi5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gJy4uL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVTdWJtaXQsIGhhbmRsZUFkZE1lc3RvU3VibWl0LCBoYW5kbGVFZGl0QXZhdGFyIH0gZnJvbSAnLi9oYW5kbGVycy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkIH0gZnJvbSAnLi9oZWxwZXJzLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aFN1Ym1pdCB9IGZyb20gJy4uL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9BcGkuanMnO1xuXG5leHBvcnQgY29uc3QgYWxsQ2xhc3NlcyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbnB1dENvbnRhaW5lclNlbGVjdG9yOiAnLnBvcHVwX19uYW1lLWNvbnRhaW5lcicsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX25hbWUnLFxuICBpbnB1dEVycm9yU2VsZWN0b3I6ICcucG9wdXBfX25hbWUucG9wdXBfX25hbWVfdHlwZV9lcnInLFxuICBkaXNhYmxlZEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXJfbmV3LWNhcmQgLnBvcHVwX19idXR0b24nLFxuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9faW5mby10aXRsZScsXG59O1xuXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcbmV4cG9ydCBjb25zdCB0cmFzaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXN0by1jYXJkX190cmFzaCcpO1xuZXhwb3J0IGNvbnN0IG5hbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFsbENsYXNzZXMubmFtZVNlbGVjdG9yKTtcbmV4cG9ydCBjb25zdCBhYm91dENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvLXN1YnRpdGxlJyk7XG5leHBvcnQgY29uc3QgZm90b0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19mb3RvJyk7XG5leHBvcnQgY29uc3QgZm9ybXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWxsQ2xhc3Nlcy5mb3JtU2VsZWN0b3IpKTtcblxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBhbGxDbGFzc2VzLm5hbWVTZWxlY3RvcixcbiAgYWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19pbmZvLXN1YnRpdGxlJyxcbn0pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cC5wb3B1cF90eXBlX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBXaXRoVXNlckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLnBvcHVwX3R5cGVfZWRpdCcsIGhhbmRsZVByb2ZpbGVTdWJtaXQsIHVzZXJJbmZvKTtcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhBZGRNZXN0b0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLnBvcHVwX3R5cGVfbmV3LWNhcmQnLCBoYW5kbGVBZGRNZXN0b1N1Ym1pdCwgdXNlckluZm8pO1xuZXhwb3J0IGNvbnN0IHBvcHVwU3VibWl0ID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwLnBvcHVwX3R5cGVfY29uZmlybScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLnBvcHVwX3R5cGVfdXBkYXRlXCIsIGhhbmRsZUVkaXRBdmF0YXIpO1xuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTI2LycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnODIyNTZmMjUtMzY1Yy00NmFjLWFhMWYtYTg0NjEyOWY2ZDc3JyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIEdFVCwgREVMRVRFJyxcbiAgfVxufSk7XG5cbmNvbnN0IHJlbmRlcmVyID0gKHsgbmFtZSwgbGluaywgbGlrZXMsIF9pZCB9LCBjdXJyZW50VXNlcikgPT4gY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlcywgX2lkLCBjdXJyZW50VXNlcik7XG5cblxuZXhwb3J0IGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIGFwaSxcbiAgcmVuZGVyZXIsXG4gIHVzZXJJbmZvLFxufSwgJy5lbGVtZW50cycpO1xuIiwiaW1wb3J0IHsgZGlzYWJsZVN1Ym1pdEJ1dHRvbnMgfSBmcm9tICcuLi9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhcmQgfSBmcm9tICcuL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgdXNlckluZm8sIHNlY3Rpb24sIGFsbENsYXNzZXMsIGFwaSwgZm90b0NvbnRhaW5lciB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZXZ0LCB2YWx1ZXMsIG9uU3VjY2Vzcykge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdmFsdWVzO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KTtcbiAgYXBpLnVwZGF0ZUVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQ6IGpvYiB9LCBvblN1Y2Nlc3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQWRkTWVzdG9TdWJtaXQoZSwgdmFsdWVzLCBvblN1Y2Nlc3MpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB7IG1lc3RvLCBsaW5rIH0gPSB2YWx1ZXM7XG5cbiAgYXBpLmFkZE5ld9ChYXJkKFxuICAgIHsgbmFtZTogbWVzdG8sIGxpbmsgfSxcbiAgICAoeyBuYW1lLCBvd25lciwgbGlrZXMsIF9pZCB9KSA9PiB7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICAgIGNvbnN0IHsgbmFtZTogdXNlck5hbWUgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgICBjb25zdCBpc093bmVyID0gdXNlck5hbWUgPT09IG93bmVyLm5hbWU7XG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlcywgX2lkLCBpc093bmVyKSk7XG4gICAgICBkaXNhYmxlU3VibWl0QnV0dG9ucyhhbGxDbGFzc2VzKTtcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFZGl0QXZhdGFyKGUsIHZhbHVlcywgb25TdWNjZXNzKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCB7IGxpbmsgfSA9IHZhbHVlcztcblxuICBhcGkudXBkYXRlRWRpdEF2YXRhcihsaW5rLCAoYXZhdGFyVXJsKSA9PiB7XG4gICAgb25TdWNjZXNzKCk7XG4gICAgZm90b0NvbnRhaW5lci5zcmMgPSBhdmF0YXJVcmw7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQge1xuICBhbGxDbGFzc2VzLFxuICBmb3JtcyxcbiAgcG9wdXBXaXRoSW1hZ2UsXG4gIHBvcHVwV2l0aFVzZXJGb3JtLFxuICBwb3B1cFdpdGhBZGRNZXN0b0Zvcm0sXG4gIHVzZXJJbmZvLFxuICBwcm9maWxlQnV0dG9uLFxuICBwcm9maWxlQnV0dG9uQWRkLFxuICBzZWN0aW9uLFxuICBhcGksXG4gIG5hbWVDb250YWluZXIsXG4gIGFib3V0Q29udGFpbmVyLFxuICBmb3RvQ29udGFpbmVyLFxuICBwb3B1cFN1Ym1pdCxcbiAgcG9wdXBFZGl0QXZhdGFyXG59IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmZ1bmN0aW9uIHNldElucHV0VmFsdWVzKHVzZXJJbmZvKSB7XG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJyk7XG4gIGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pvYicpO1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gYWJvdXQ7XG59XG5cbmZvcm1zLmZvckVhY2goZnVuY3Rpb24gKGZvcm0pIHtcbiAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGFsbENsYXNzZXMsIGZvcm0pO1xuICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb25zKCk7XG59KTtcblxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aFVzZXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhBZGRNZXN0b0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwU3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBXaXRoVXNlckZvcm0ub3BlbigpO1xuICBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG5cbn0pO1xuXG5mb3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEVkaXRBdmF0YXIub3BlbigpO1xuICBzZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XG59KTtcblxuXG5wcm9maWxlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcG9wdXBXaXRoQWRkTWVzdG9Gb3JtLm9wZW4pXG5cbmFwaS5nZXRJbmZvQWJvdXRQZW9wbGUoKGRhdGEpID0+IHtcbiAgbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgYWJvdXRDb250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICBmb3RvQ29udGFpbmVyLnNyYyA9IGRhdGEuYXZhdGFyO1xuXG4gIHNlY3Rpb24uaW5pdENhcmRzKCk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=